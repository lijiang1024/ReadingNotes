
# ç¬¬ä¸€è¡Œä»£ç  ç¬¬äºŒç‰ˆ è¯»ä¹¦ç¬”è®°

>
> æœ¬ä¹¦æ˜¯ Android ç¨‹åºå¼€å‘çš„å­¦ä¹ å‚è€ƒä¹¦ç±
>
> Google Androidå®˜æ–¹åœ°å€ ï¼š
>   * [Androidå›½å†…å®˜æ–¹åœ°å€](https://developer.android.google.cn)
>   * [Androidå®˜æ–¹åœ°å€](https://developer.android.com)
> 

## ç¬¬ä¸€ç« 

-----

#### <span style="color: white;">1ã€Androidç³»ç»Ÿæ¶æ„</span>

> *<span style="color: grey;">Androidå¤§è‡´å¯åˆ†ä¸ºå››å±‚æ¶æ„ï¼šLinuxå†…æ ¸å±‚ã€ç³»ç»Ÿè¿è¡Œåº“å±‚ã€åº”ç”¨æ¡†æ¶å±‚ å’Œ åº”ç”¨å±‚</span>*

1. Linuxå†…æ ¸å±‚
    * Androidç³»ç»Ÿæ˜¯åŸºäºLinuxå†…æ ¸çš„ï¼Œè¿™ä¸€å±‚ä¸ºAndroidè®¾å¤‡çš„å„ç§ç¡¬ä»¶æä¾›äº†åº•å±‚çš„é©±åŠ¨ã€‚

2. ç³»ç»Ÿè¿è¡Œåº“å±‚
    * é€šè¿‡ä¸€äº› C/C++ åº“æ¥ä¸ºAndroidç³»ç»Ÿæä¾›ä¸»è¦çš„ç‰¹æ€§æ”¯æŒã€‚
    * åŒ…å«Androidè¿è¡Œæ—¶åº“ï¼Œæä¾›äº†ä¸€äº›æ ¸å¿ƒåº“ï¼Œèƒ½å¤Ÿå…è®¸å¼€å‘è€…ä½¿ç”¨Javaè¯­è¨€ç¼–å†™Androidåº”ç”¨ã€‚Androidè¿è¡Œæ—¶åº“ä¸­è¿˜åŒ…å«äº†Dalvikè™šæ‹Ÿæœºï¼ˆ5.0ç³»ç»Ÿä¹‹åæ”¹ä¸ºARTè¿è¡Œç¯å¢ƒï¼‰ã€‚

3. åº”ç”¨æ¡†æ¶å±‚
    * æä¾›äº†æ„å»ºåº”ç”¨ç¨‹åºæ—¶å¯èƒ½ç”¨åˆ°çš„å„ç§APIã€‚

4. åº”ç”¨å±‚
    * æ‰€æœ‰å®‰è£…åœ¨æ‰‹æœºä¸Šçš„åº”ç”¨ç¨‹åºéƒ½å±äºè¿™ä¸€å±‚ã€‚



**Androidç³»ç»Ÿæ¶æ„**

![Androidç³»ç»Ÿæ¶æ„](https://developer.android.google.cn/guide/platform/images/android-stack_2x.png)

-----

#### <span style="color: white;">2ã€Androidåº”ç”¨å¼€å‘ç‰¹è‰²</span>

1. å››å¤§ç»„ä»¶
    * Activity
    * Service
    * Broadcast Receiver
    * Content Provider

2. ä¸°å¯Œçš„ç³»ç»Ÿæ§ä»¶

3. SQLiteæ•°æ®åº“
    
    > *<span style="color: grey;">SQLiteæ•°æ®åº“ æ˜¯ä¸€ç§è½»é‡çº§ã€è¿ç®—é€Ÿåº¦æå¿«çš„åµŒå…¥å¼å…³ç³»å‹æ•°æ®åº“</span>*

4. å¼ºå¤§çš„å¤šåª’ä½“

5. åœ°ç†ä½ç½®å®šä½

-----

#### <span style="color: white;">3ã€Android Studioåˆ›å»ºçš„Androidé¡¹ç›®çš„ç»“æ„è§£æï¼ˆHelloWorldï¼‰</span>

```
-- HelloWorld\
   |-- .gradle\
   |-- .idea\
   |-- app\
   |   |-- build\
   |   |-- libs\
   |   |-- src\
   |   |   |-- androidTest\
   |   |   |-- main\
   |   |   |   |-- java\
   |   |   |   |-- res\
   |   |   |   |   |-- drawable\
   |   |   |   |   |-- layout\
   |   |   |   |   |-- mipmap-hdpi\ 
   |   |   |   |   |-- mipmap-mdpi\
   |   |   |   |   |-- mipmap-xhdpi\
   |   |   |   |   |-- mipmap-xxhdpi\
   |   |   |   |   |-- mipmap-xxxhdpi\
   |   |   |   |   |-- values\
   |   |   |   |   |-- values-w820dp\
   |   |   |   |-- AndroidManifest.xml
   |   |   |
   |   |   |-- test\
   |   |
   |   |-- .gitignore
   |   |-- app.iml
   |   |-- build.gradle
   |   |-- proguard-rules.pro
   |   
   |-- build\
   |-- gradle\
   |-- .gitignore
   |-- build.gradle
   |-- gradle.properties
   |-- gradlew
   |-- gradlew.bat
   |-- HelloWorld.iml
   |-- local.properties
   |-- settings.gradle
```

1. **é¡¹ç›®ç»“æ„è§£æ**
    
    * .gradle\ å’Œ .idea\

        è¿™ä¸¤ä¸ªç›®å½•ä¸‹æ”¾çš„æ˜¯Android Studioè‡ªåŠ¨ç”Ÿæˆçš„ä¸€äº›æ–‡ä»¶ï¼Œæ— éœ€å…³å¿ƒï¼Œä¹Ÿä¸è¦å»æ‰‹åŠ¨ç¼–è¾‘ã€‚

    * app\

        é¡¹ç›®ä¸­çš„ä»£ç ã€èµ„æºç­‰å†…å®¹å‡ ä¹éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢ã€‚

    * build\

        è¿™ä¸ªç›®å½•ä¸éœ€è¦å…³å¿ƒï¼Œå®ƒä¸»è¦åŒ…å«äº†ä¸€äº›åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶

    * gradle\

        è¿™ä¸ªç›®å½•ä¸‹åŒ…å«äº†gradle wrapperçš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨gradle wrapperçš„æ–¹å¼ï¼Œä¸éœ€è¦æå‰å°†graldeä¸‹è½½å¥½ï¼Œè€Œæ˜¯ä¼šè‡ªåŠ¨æ ¹æ®æœ¬åœ°ç¼“å­˜æƒ…å†µå†³å®šæ˜¯å¦éœ€è¦è”ç½‘ä¸‹è½½gradleã€‚Android Studioé»˜è®¤æ²¡æœ‰å¯ç”¨gradle wrapperçš„æ–¹å¼ï¼Œå¦‚æœéœ€è¦æ‰“å¼€ï¼Œå¯ä»¥ç‚¹å‡»Android Studioå¯¼èˆªæ  --> File --> Settings --> Build, Execution, Deployment --> Gradleï¼Œè¿›è¡Œé…ç½®æ›´æ”¹ã€‚

    * .gitignore

        è¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥å°†æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–

    * build.gradle

        è¿™æ˜¯é¡¹ç›®å…¨å±€çš„gradleæ„å»ºè„šæœ¬ï¼Œé€šå¸¸è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸éœ€è¦ä¿®æ”¹çš„ã€‚

    * gradle.properties

        è¿™ä¸ªæ–‡ä»¶æ˜¯å…¨å±€çš„gradleé…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œé…ç½®çš„å±æ€§å°†ä¼šå½±å“åˆ°é¡¹ç›®ä¸­æ‰€æœ‰çš„gradleç¼–è¯‘è„šæœ¬

    * gradlew å’Œ gradlew.bat

        è¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥åœ¨å‘½ä»¤è¡Œç•Œé¢æ‰§è¡Œgradleå‘½ä»¤çš„ï¼Œå…¶ä¸­gradlewæ˜¯åœ¨ Linux æˆ– Mac ç³»ç»Ÿä¸­ä½¿ç”¨çš„ï¼Œgradlew.batæ˜¯åœ¨ Windows ç³»ç»Ÿä¸­ä½¿ç”¨çš„ã€‚

    * HelloWorld.iml

        imlæ–‡ä»¶æ˜¯æ‰€æœ‰ IntelliJ IDEA é¡¹ç›®éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªæ–‡ä»¶ï¼ˆAndroid Studio æ˜¯åŸºäºIntelliJ IDEA å¼€å‘çš„ï¼‰

    * local.properties

        è¿™ä¸ªæ–‡ä»¶ç”¨äºæŒ‡å®šæœ¬æœºä¸­çš„Android SDKè·¯å¾„ï¼Œé€šå¸¸å†…å®¹éƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹ã€‚

    * settings.gradle

        è¿™ä¸ªæ–‡ä»¶ç”¨äºæŒ‡å®šé¡¹ç›®ä¸­æ‰€æœ‰å¼•å…¥çš„æ¨¡å—ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¨¡å—çš„å¼•å…¥éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„åœºæ™¯å¯èƒ½æ¯”è¾ƒå°‘ã€‚

2. **appç›®å½•ç»“æ„è§£æ**

    * build\

        è¿™ä¸ªç›®å½•å’Œå¤–å±‚çš„ build ç›®å½•ç±»ä¼¼ï¼Œä¸»è¦ä¹Ÿæ˜¯åŒ…å«äº†ä¸€äº›åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ã€‚

    * libs\

        å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œå°±éœ€è¦æŠŠè¿™äº›jaråŒ…éƒ½æ”¾åœ¨libsç›®å½•ä¸‹ï¼Œæ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹çš„jaråŒ…éƒ½ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°æ„å»ºè·¯å¾„é‡Œå»ã€‚

    * androidTest\

        è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥ç¼–å†™Android Testæµ‹è¯•ç”¨ä¾‹çš„ï¼Œå¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

    * java\

        javaç›®å½•æ˜¯æ”¾ç½®é¡¹ç›®ä¸­çš„Javaä»£ç çš„åœ°æ–¹ã€‚

    * res\

        åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ‰€æœ‰å›¾ç‰‡ã€å¸ƒå±€ã€å­—ç¬¦ä¸²ç­‰èµ„æºéƒ½è¦å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚è¿™ä¸ªç›®å½•ä¸­è¿˜æœ‰å¾ˆå¤šå­ç›®å½•ï¼Œå›¾ç‰‡æ”¾åœ¨drawableç›®å½•ä¸‹ï¼Œå¸ƒå±€æ–‡ä»¶æ”¾åœ¨layoutç›®å½•ä¸‹ï¼Œå­—ç¬¦ä¸²æ”¾åœ¨valuesç›®å½•ä¸‹ï¼Œ

        > drawableå¼€å¤´çš„ç›®å½•éƒ½æ˜¯ç”¨æ¥å­˜æ”¾å›¾ç‰‡çš„ï¼›mipmapå¼€å¤´çš„ç›®å½•éƒ½æ˜¯ç”¨æ¥å­˜æ”¾åº”ç”¨å›¾æ ‡çš„ï¼›valueså¼€å¤´çš„ç›®å½•éƒ½æ˜¯ç”¨æ¥å­˜æ”¾å­—ç¬¦ä¸²ã€æ ·å¼ã€é¢œè‰²ç­‰é…ç½®çš„ï¼›layoutå¼€å¤´çš„ç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾å¸ƒå±€æ–‡ä»¶çš„ã€‚

    * AndroidManifest.xml

        è¿™æ˜¯æ•´ä¸ªAndroidé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨ç¨‹åºä¸­å®šä¹‰çš„å››å¤§ç»„ä»¶éƒ½éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œæ³¨å†Œï¼Œè¿˜å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç»™åº”ç”¨æ·»åŠ æƒé™å£°æ˜ã€‚

    * test\

        è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥ç¼–å†™Unit Testæµ‹è¯•ç”¨ä¾‹çš„ï¼Œæ˜¯å¯¹é¡¹ç›®è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„å¦ä¸€ç§æ–¹å¼ã€‚

    * .gitignore

        è¿™ä¸ªæ–‡ä»¶ç”¨äºå°†appæ¨¡å—å†…çš„æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–ï¼Œä½œç”¨å’Œå¤–å±‚çš„gitignoreæ–‡ä»¶ç±»ä¼¼ã€‚

    * app.iml

        IntelliJ IDEA é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä¸éœ€è¦å…³å¿ƒæˆ–ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹ã€‚

    * build.grade

        è¿™æ˜¯appæ¨¡å—çš„gradleæ„å»ºè„šæœ¬ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä¼šæŒ‡å®šå¾ˆå¤šé¡¹ç›®æ„å»ºç›¸å…³çš„é…ç½®ã€‚

    * proguard-rules.pro

        è¿™ä¸ªæ–‡ä»¶ç”¨äºæŒ‡å®šé¡¹ç›®ä»£ç çš„æ··æ·†è§„åˆ™ã€‚


3. <b>build.gradleè¯¦è§£</b>

    > Android Studioé‡‡ç”¨Gradleæ„å»ºé¡¹ç›®ã€‚Gradleæ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›çš„é¡¹ç›®æ„å»ºå·¥å…·ï¼Œä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰æ¥å£°æ˜é¡¹ç›®è®¾ç½®ã€‚
    
    * <b><i>å¤–å±‚ç›®å½•çš„build.gradleæ–‡ä»¶ä¸­çš„ä»£ç </i></b>
        ```
            buildscript {
                repositories {
                    jcenter()
                }
                dependencies {
                    classpath 'com.android.tools.build:gradle:2.2.3'

                    // NOTE: Do not place your application dependencies here; they belong
                    // in the individual module build.gradle files
                }
            }

            allprojects {
                repositories {
                    jcenter()
                }
            }

            task clean(type: Delete) {
                delete rootProject.buildDir
            }
        ```
    
        * é¦–å…ˆä¸¤å¤„ repositories é—­åŒ…ä¸­éƒ½å£°æ˜äº† jcenter() é…ç½®ï¼Œ jcenter æ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡ä»“åº“ï¼Œå¾ˆå¤šAndroidé¡¹ç›®éƒ½ä¼šé€‰æ‹©å°†ä»£ç æ‰˜ç®¡åˆ° jcenter ä¸Šï¼Œå£°æ˜è¿™è¡Œé…ç½®ä¹‹åï¼Œå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­è½»æ¾å¼•ç”¨ jcenter ä¸Šçš„å¼€æºé¡¹ç›®äº†ã€‚

        * dependencies é—­åŒ…ä¸­ä½¿ç”¨ classpath å£°æ˜äº†ä¸€ä¸ªGradleæ’ä»¶ã€‚å¦‚æœæƒ³ä½¿ç”¨Gradleæ„å»ºAndroidé¡¹ç›®ï¼Œåˆ™éœ€è¦å£°æ˜ com.android.tools.build:gradle:2.2.3 è¿™ä¸ªæ’ä»¶ã€‚å…¶ä¸­æœ€åçš„éƒ¨åˆ†æ˜¯æ’ä»¶çš„ç‰ˆæœ¬å·ã€‚

        > é€šå¸¸ä¸éœ€è¦ä¿®æ”¹å¤–å±‚ç›®å½•ä¸‹çš„build.gradleæ–‡ä»¶ï¼Œé™¤éæƒ³æ·»åŠ ä¸€äº›å…¨å±€çš„é¡¹ç›®æ„å»ºé…ç½®ã€‚

    * <b><i>appç›®å½•çš„build.gradleæ–‡ä»¶ä¸­çš„ä»£ç </i></b>
        ```
            apply plugin: 'com.android.application'

            android {
                compileSdkVersion 25
                buildToolsVersion "25.0.0"
                defaultConfig {
                    applicationId "org.liti.helloandroid"
                    minSdkVersion 19
                    targetSdkVersion 25
                    versionCode 1
                    versionName "1.0"
                    testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
                }
                buildTypes {
                    release {
                        minifyEnabled false
                        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
                    }
                }
            }

            dependencies {
                compile fileTree(dir: 'libs', include: ['*.jar'])
                androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
                    exclude group: 'com.android.support', module: 'support-annotations'
                })
                compile 'com.android.support:appcompat-v7:25.0.1'
                compile 'com.android.support:design:25.0.1'
                testCompile 'junit:junit:4.12'
                compile 'com.orhanobut:logger:1.15'
            }
        ```
        
        * ç¬¬ä¸€è¡Œåº”ç”¨äº†ä¸€ä¸ªæ’ä»¶ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§å€¼å¯é€‰ï¼š com.android.application è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—ï¼› com.android.library è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº“æ¨¡å—ã€‚ã€ä¸¤è€…çš„åŒºåˆ«ï¼Œåº”ç”¨ç¨‹åºæ¨¡å—å¯ä»¥ç›´æ¥è¿è¡Œï¼Œåº“æ¨¡å—åªèƒ½ä½œä¸ºä»£ç ä¾é™„äºåº”ç”¨ç¨‹åºæ¨¡å—æ¥è¿è¡Œã€‘

        * androidé—­åŒ…ï¼Œåœ¨è¿™ä¸ªé—­åŒ…ä¸­å¯ä»¥é…ç½®é¡¹ç›®æ„å»ºçš„å„ç§å±æ€§
            
            * compileSdkVersion ç”¨äºæŒ‡å®šé¡¹ç›®çš„ç¼–è¯‘ç‰ˆæœ¬
            
            * buildToolsVersion ç”¨äºæŒ‡å®šé¡¹ç›®æ„å»ºå·¥å…·çš„ç‰ˆæœ¬
            
            * defaultConfigé—­åŒ… åœ¨è¿™é‡Œé¢å¯ä»¥å¯¹é¡¹ç›®çš„æ›´å¤šç»†èŠ‚è¿›è¡Œé…ç½®

                * applicationId ç”¨äºæŒ‡å®šé¡¹ç›®çš„åŒ…å

                * minSdkVersion ç”¨äºæŒ‡å®šé¡¹ç›®æœ€ä½å…¼å®¹çš„Androidç³»ç»Ÿç‰ˆæœ¬

                * targetSdkVersion æŒ‡å®šçš„å€¼è¡¨ç¤ºåœ¨è¯¥ç›®æ ‡ç‰ˆæœ¬ä¸Šå·²ç»åšäº†å……åˆ†çš„æµ‹è¯•ï¼Œç³»ç»Ÿå°†ä¼šä¸ºä½ çš„åº”ç”¨ç¨‹åºå¯ç”¨ä¸€äº›æœ€æ–°çš„åŠŸèƒ½å’Œç‰¹æ€§

                * versionCode ç”¨äºæŒ‡å®šé¡¹ç›®çš„ç‰ˆæœ¬å·

                * versionName ç”¨äºæŒ‡å®šé¡¹ç›®çš„ç‰ˆæœ¬åç§°

            * buildTypesé—­åŒ… ç”¨äºæŒ‡å®šç”Ÿæˆå®‰è£…æ–‡ä»¶çš„ç›¸å…³é…ç½®ï¼Œé€šå¸¸åªä¼šæœ‰ä¸¤ä¸ªé—­åŒ…ï¼Œä¸€ä¸ªæ˜¯debugã€debugé—­åŒ…ç”¨äºæŒ‡å®šç”Ÿæˆæµ‹è¯•ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ã€‘ï¼Œä¸€ä¸ªæ˜¯releaseã€releaseé—­åŒ…ç”¨äºç”Ÿæˆæ­£å¼ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ã€‘ã€‚

                * releaseé—­åŒ…çš„å†…å®¹ï¼šminifyEnabled ç”¨äºæŒ‡å®šæ˜¯å¦å¯¹é¡¹ç›®çš„ä»£ç è¿›è¡Œæ··æ·†ï¼Œtrueè¡¨ç¤ºæ··æ·†ï¼Œfalseè¡¨ç¤ºä¸æ··æ·†ï¼›proguardFiles ç”¨äºæŒ‡å®šæ··æ·†æ—¶ä½¿ç”¨çš„è§„åˆ™æ–‡ä»¶ã€è¿™é‡ŒæŒ‡å®šäº†ä¸¤ä¸ªæ··æ·†æ–‡ä»¶ï¼šç¬¬ä¸€ä¸ªproguard-android.txt æ˜¯åœ¨AndroidSDKç›®å½•ä¸‹çš„ï¼Œé‡Œé¢æ˜¯æ‰€æœ‰é¡¹ç›®çš„é€šç”¨æ··æ·†è§„åˆ™ï¼›ç¬¬äºŒä¸ªproguard-rules.pro æ˜¯åœ¨å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„ï¼Œé‡Œé¢å¯ä»¥ç¼–å†™å½“å‰é¡¹ç›®ç‰¹æœ‰çš„æ··æ·†è§„åˆ™ã€‘ã€‚

        * dependenciesé—­åŒ… å¯ä»¥æŒ‡å®šå½“å‰é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–å…³ç³»ã€‚
            > é€šå¸¸Android Studio é¡¹ç›®æœ‰3ç§ä¾èµ–æ–¹å¼ï¼šæœ¬åœ°ä¾èµ–ã€åº“ä¾èµ– å’Œ è¿œç¨‹ä¾èµ–
        
            * æœ¬åœ°ä¾èµ– å¯ä»¥å¯¹æœ¬åœ°çš„jaråŒ…æˆ–ç›®å½•æ·»åŠ ä¾èµ–å…³ç³»ã€compile fileTree(dir: 'libs', include: ['*.jar'])ã€‘

            * åº“ä¾èµ– å¯ä»¥å¯¹é¡¹ç›®ä¸­çš„åº“æ¨¡å—æ·»åŠ ä¾èµ–å…³ç³»ã€æ¯”å¦‚æœ‰ä¸ªä¸€åº“æ¨¡å—åå­—å«helperï¼Œæ·»åŠ åº“ä¾èµ–çš„å£°æ˜è¯­å¥ä¸º compile project(':helper')ã€‘

            * è¿œç¨‹ä¾èµ– å¯ä»¥å¯¹ jcenter åº“ä¸Šçš„å¼€æºé¡¹ç›®æ·»åŠ ä¾èµ–å…³ç³»ã€compile 'com.orhanobut:logger:1.15'ã€‘

            * testCompile ç”¨äºå£°æ˜æµ‹è¯•ç”¨ä¾‹åº“


-----
-----

## ç¬¬äºŒç«  æ¢ç©¶Activity

-----

#### Activityä¹‹é—´è·³è½¬ -- Intent

> Intent æ˜¯ Androidç¨‹åºä¸­å„ç»„ä»¶ä¹‹é—´è¿›è¡Œäº¤äº’çš„ä¸€ç§é‡è¦æ–¹å¼ï¼Œä¸ä»…å¯ä»¥æŒ‡æ˜å½“å‰ç»„ä»¶æƒ³è¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œè¿˜å¯ä»¥åœ¨ä¸åŒç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®ã€‚ 


Intent å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š **æ˜¾ç¤ºIntent** å’Œ **éšæ—¶å¼Intent**

* æ˜¾ç¤ºIntentï¼š

    Intentæœ‰å¤šä¸ªæ„é€ å‡½æ•°é‡è½½ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ï¼š
    
    ```
        Intetn(Context packageContext, Class<?> cls)

        * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦æ±‚æä¾›ä¸€ä¸ªå¯åŠ¨Activityçš„ä¸Šä¸‹æ–‡
        * ç¬¬äºŒä¸ªå‚æ•°ï¼šæŒ‡å®šæƒ³è¦å¯åŠ¨çš„ç›®æ ‡Activity
    ```

* éšå¼Intent

    éšå¼Intentä¸æ˜ç¡®æŒ‡å‡ºè¦å¯åŠ¨çš„Activityï¼Œè€Œæ˜¯æŒ‡å®šä¸€ç³»åˆ—æ›´ä¸ºæŠ½è±¡çš„ **action** å’Œ **category** ç­‰ä¿¡æ¯ï¼Œç„¶åç”±ç³»ç»Ÿå»åˆ†æIntentï¼Œå¹¶æ‰¾å‡ºåˆé€‚çš„Activityå»å¯åŠ¨

    é€šè¿‡åœ¨AndroidManifest.xmlæ–‡ä»¶çš„ **<activity>** æ ‡ç­¾ä¸‹é…ç½® **<intent-filter>** çš„å†…å®¹ï¼Œå¯ä»¥æŒ‡å®šå½“å‰çš„Activityèƒ½å¤Ÿå“åº”çš„ **action** å’Œ **category** 

    ```
        <activity android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    ```

    > æ¯ä¸ªIntentä¸­åªèƒ½æŒ‡å®šä¸€ä¸ªactionï¼Œä½†èƒ½å¤ŸæŒ‡å®šå¤šä¸ªcategoryã€‚

    ```
        Intent intent = new Intent("actionçš„æ ‡è¯†ä¸²");
        intent.addCategory("categoryçš„æ ‡è¯†ä¸²");
    ```

* æ›´å¤šéšå¼Intentçš„ç”¨æ³•

    * è°ƒç”¨ç³»ç»Ÿçš„æµè§ˆå™¨æ‰“å¼€ç½‘é¡µ
    ```
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.prase("http://www.baidu.com"));
        startActivity(intent);
    ```

    > å¯ä»¥åœ¨ <intent-filter> æ ‡ç­¾ä¸­é…ç½®ä¸€ä¸ª <data>æ ‡ç­¾ï¼Œç”¨äºæ›´ç²¾ç¡®åœ°æŒ‡å®šå½“å‰æ´»åŠ¨èƒ½å¤Ÿå“åº”ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚<data>æ ‡ç­¾ä¸­ä¸»è¦å¯ä»¥é…ç½®ä¸€ä¸‹å†…å®¹ï¼š<br/>
    > > * android:scheme ç”¨äºæŒ‡å®šæ•°æ®çš„åè®®éƒ¨åˆ†ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„httpéƒ¨åˆ†<br/>
    > > * android:host ç”¨äºæŒ‡å®šæ•°æ®çš„ä¸»æœºéƒ¨åˆ†ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ www.baidu.com éƒ¨åˆ†<br/>
    > > * android:port ç”¨äºæŒ‡å®šæ•°æ®çš„ç«¯å£éƒ¨åˆ†ï¼Œä¸€èˆ¬ç´§éšä¸»æœºåä¹‹å<br/>
    > > * android:path ç”¨äºæŒ‡å®šä¸»æœºåå’Œç«¯å£ä¹‹åçš„éƒ¨åˆ†ï¼Œå¦‚ä¸€æ®µç½‘å€ä¸­è·Ÿåœ¨åŸŸåä¹‹åçš„å†…å®¹<br/>
    > > * android:mimeType ç”¨äºæŒ‡å®šå¯ä»¥å¤„ç†çš„æ•°æ®ç±»å‹ï¼Œå…è®¸ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼è¿›è¡ŒæŒ‡å®š<br/>

    ```
        <activity android:name=".ThirdActivity">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <data android:scheme="http" />
            </intent-filter>
        </activity>

    ```

    * å…¶ä»–åè®®
        * geo è¡¨ç¤ºæ˜¾ç¤ºåœ°ç†ä½ç½®
        * tel è¡¨ç¤ºæ‹¨æ‰“ç”µè¯

        ```
            Intent intent = new Intent(Intent.ACTION_DIAL);
            intent.setData(Uri.prase("tel:10086"));
            startActivity(intent);
        ```
    
-----

#### Android Activity ç”Ÿå‘½å‘¨æœŸ

* è¿”å›æ ˆ

> Android ä½¿ç”¨ä»»åŠ¡ï¼ˆTaskï¼‰æ¥ç®¡ç†æ´»åŠ¨ï¼Œä¸€ä¸ªä»»åŠ¡å°±æ˜¯ä¸€ç»„å­˜æ”¾åœ¨æ ˆé‡Œçš„Activityçš„é›†åˆï¼Œè¿™ä¸ªæ ˆä¹Ÿè¢«æˆä¸ºè¿”å›æ ˆï¼ˆBack Stackï¼‰ã€‚


* Activiyçš„çŠ¶æ€
    
    * è¿è¡ŒçŠ¶æ€
        > å½“Activityä½äºè¿”å›æ ˆæ ˆé¡¶æ—¶ï¼Œå°±å¤„äºè¿è¡ŒçŠ¶æ€ã€‚

    * æš‚åœçŠ¶æ€
        > å½“Activityä¸å†å¤„äºæ ˆé¡¶ä½ç½®ï¼Œä½†æ˜¯ä»ç„¶å¯è§æ—¶ï¼Œå°±è¿›å…¥äº†æš‚åœçŠ¶æ€
    
    * åœæ­¢çŠ¶æ€
        > å½“Activityä¸å†å¤„äºæ ˆé¡¶ä½ç½®ï¼Œä¸”å®Œå…¨ä¸å¯è§æ—¶ï¼Œå°±è¿›å…¥äº†åœæ­¢çŠ¶æ€
    
    * é”€æ¯çŠ¶æ€
        > å½“Activityä»è¿”å›æ ˆä¸­ç§»é™¤åï¼Œå°±å˜æˆäº†é”€æ¯çŠ¶æ€


* Activityçš„ç”Ÿå‘½å‘¨æœŸ

    * Activityä¸­å®šä¹‰äº†7ä¸ªæ–¹æ³•ï¼Œè¦†ç›–äº†æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸€ä¸ªç¯èŠ‚

        * onCreate()
            > åœ¨Activityç¬¬ä¸€æ¬¡è¢«åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ã€‚

        * onStart()
            > åœ¨Activityç”±ä¸å¯è§å˜ä¸ºå¯è§çš„æ—¶å€™è°ƒç”¨ã€‚

        * onResume()
            > åœ¨Activityå‡†å¤‡å¥½å’Œç”¨æˆ·è¿›è¡Œäº¤äº’çš„æ—¶å€™è°ƒç”¨ã€‚æ­¤æ—¶Activityä¸€å®šå¨å«è¿”å›æ ˆçš„æ ˆé¡¶ï¼Œå¹¶ä¸”å¤„äºè¿è¡ŒçŠ¶æ€ã€‚

        * onPause()
            > åœ¨ç³»ç»Ÿå‡†å¤‡å»å¯åŠ¨æˆ–æ¢å¤å¦ä¸€ä¸ªActivityçš„æ—¶å€™è°ƒç”¨ã€‚

        * onStop()
            > åœ¨Activityå®Œå…¨ä¸å¯è§çš„æ—¶å€™è°ƒç”¨ã€‚

        * onDestory()
            > åœ¨Activityè¢«é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚

        * onRestart()
            > åœ¨Activityç”±åœæ­¢çŠ¶æ€å˜ä¸ºè¿è¡ŒçŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯Activityè¢«é‡æ–°å¯åŠ¨äº†ã€‚

    * ä»¥ä¸Š7ä¸ªæ–¹æ³•ï¼Œé™¤onRestart()æ–¹æ³•å¤–ï¼Œå…¶ä»–éƒ½æ˜¯ä¸¤ä¸¤ç›¸å¯¹ï¼Œå› æ­¤å¯ä»¥å°†æ´»åŠ¨åˆ†ä¸º3ç§ç”Ÿå­˜æœŸ

        * å®Œæ•´ç”Ÿå­˜æœŸ
            > onCreate() ---> onDestory()

        * å¯è§ç”Ÿå­˜æœŸ
            > onStart() ---> onStop()

        * å‰å°ç”Ÿå­˜æœŸ
            > onResume() ---> onPause()


<div style="background-color:white; width: 513px; height: 663px;">

![Activity LifeCycele](https://developer.android.google.cn/images/activity_lifecycle.png)

</div><br/><br/><br/>

-----

#### Activityçš„å¯åŠ¨æ¨¡å¼

> Activity çš„å¯åŠ¨æ¨¡å¼æœ‰4ç§ï¼šstandardã€singleTopã€singleTaskã€singleInstanceï¼Œå¯ä»¥åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­é€šè¿‡ç»™ <activity> æ ‡ç­¾æŒ‡å®š android:launchModeå±æ€§æ¥é€‰æ‹©å¯åŠ¨æ¨¡å¼

    

* standard 

    > æ˜¯Activityçš„é»˜è®¤å¯åŠ¨æ¨¡å¼ã€‚åœ¨ standard æ¨¡å¼ä¸‹ï¼Œæ¯å½“å¯åŠ¨ä¸€ä¸ªæ–°çš„Activityï¼Œå®ƒéƒ½ä¼šåœ¨è¿”å›æ ˆä¸­å…¥æ ˆï¼Œå¹¶å¤„äºæ ˆé¡¶ä½ç½®ã€‚
    
* singleTop

    > åœ¨ singleTop æ¨¡å¼ä¸‹ï¼Œåœ¨å¯åŠ¨Activityæ—¶ï¼Œå¦‚æœå‘ç°è¿”å›æ ˆçš„æ ˆé¡¶å·²ç»æ˜¯è¯¥Activityçš„å®ä¾‹ï¼Œåˆ™è®¤ä¸ºå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒï¼Œä¸ä¼šå†åˆ›å»ºæ–°çš„Activityå®ä¾‹ï¼› å¦‚æœè¿”å›æ ˆæ ˆé¡¶çš„æ´»åŠ¨ä¸æ˜¯è¯¥Activityçš„å®ä¾‹ï¼Œæ­¤æ—¶å¯åŠ¨Activityä¼šåˆ›å»ºæ–°çš„Activityå®ä¾‹ã€‚

* singleTask
        
    > åœ¨ singleTask æ¨¡å¼ä¸‹ï¼Œåœ¨å¯åŠ¨Activityæ—¶ï¼Œç³»ç»Ÿé¦–å…ˆä¼šåœ¨è¿”å›æ ˆä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯¥Activityçš„å®ä¾‹ï¼Œå¦‚æœå‘ç°å·²ç»å­˜åœ¨åˆ™ç›´æ¥ä½¿ç”¨è¯¥å®ä¾‹ï¼Œå¹¶ä¸”æŠŠåœ¨è¿™ä¸ªActivityä¹‹ä¸Šçš„æ‰€æœ‰Activityç»Ÿç»Ÿå‡ºæ ˆï¼Œå¦‚æœæ²¡æœ‰å‘ç°å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„Activityå®ä¾‹

* singleInstance
        
    > æŒ‡å®šä¸º singleInstance æ¨¡å¼çš„Activityï¼Œåœ¨å¯åŠ¨Activityæ—¶ä¼šå¯ç”¨ä¸€ä¸ªæ–°çš„è¿”å›æ ˆæ¥ç®¡ç†è¿™ä¸ªæ´»åŠ¨ã€å…¶å®å¦‚æœ singleTask æ¨¡å¼æŒ‡å®šäº†ä¸åŒçš„ taskAffinityï¼Œä¹Ÿä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„è¿”å›æ ˆã€‘ã€‚


_ _ _ _ _
-----

## ç¬¬ä¸‰ç«  UIå¼€å‘çš„ç‚¹ç‚¹æ»´æ»´

-----

#### åˆ¶ä½œ Nine-Patchå›¾ç‰‡
> åœ¨Android SDK ç›®å½•ä¸‹æœ‰ä¸€ä¸ªtoolsç›®å½• æœ‰ä¸ªdraw9patch.batçš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨å®ƒæ¥åˆ¶ä½œNine-Patchå›¾ç‰‡ã€‚

* åˆ¶ä½œNine-Patchå›¾ç‰‡æ—¶ï¼Œåœ¨ draw9patch ç¨‹åºä¸­å¯¼å…¥å›¾ç‰‡ï¼Œåœ¨å›¾ç‰‡çš„å››ä¸ªè¾¹æ¡†ç»˜åˆ¶ä¸€ä¸ªä¸ªå°é»‘ç‚¹
    * ä¸Šè¾¹æ¡† å’Œ å·¦è¾¹æ¡† çš„ç»˜åˆ¶åŒºåŸŸï¼Œè¡¨ç¤ºå›¾ç‰‡çš„æ‹‰ä¼¸åŒºåŸŸ
    * ä¸‹è¾¹æ¡† å’Œ å³è¾¹æ¡† çš„ç»˜åˆ¶åŒºåŸŸï¼Œè¡¨ç¤ºå›¾ç‰‡ä¸­å†…å®¹çš„æ˜¾ç¤ºåŒºåŸŸ

    > ä½¿ç”¨é¼ æ ‡ğŸ–±åœ¨å›¾ç‰‡è¾¹ç¼˜æ‹–åŠ¨ï¼Œå°±å¯ä»¥ç»˜åˆ¶äº†ï¼›æŒ‰ä½Shifté”®æ‹–åŠ¨é¼ æ ‡å¯ä»¥è¿›è¡Œæ“¦é™¤ç»˜åˆ¶ã€‚


-----
-----

## ç¬¬å››ç«  æ¢ç©¶Fragment

> Fragment æ˜¯ä¸€ç§èƒ½å¤ŸåµŒå…¥åœ¨Activityä¸­çš„UIç‰‡æ®µï¼Œå®ƒèƒ½å¤Ÿè®©ç¨‹åºæ›´åŠ åˆç†å’Œå……åˆ†åœ°åˆ©ç”¨å¤§å±å¹•çš„ç©ºé—´ï¼Œå› è€Œåœ¨å¹³æ¿ä¸Šåº”ç”¨çš„éå¸¸å¹¿æ³›ã€‚

-----

#### Fragmentçš„ä½¿ç”¨æ–¹å¼

* Fragmentçš„ç®€å•ç”¨æ³•

    * æ–°å»ºä¸€ä¸ªJavaç±»LeftFragmentï¼Œå¹¶è®©å®ƒé›†æˆFragmentç±»ï¼Œæœ‰ä¸¤ä¸ªä¸åŒåŒ…ä¸‹çš„Fragmentç±»ä¾›é€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿå†…ç½®çš„Android.app.Fragmentï¼Œå¦ä¸€ä¸ªæ˜¯ support-v4 åº“ä¸­æä¾›çš„android.support.v4.app.Fragmentã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨support-v4åº“ä¸­çš„Fragmentã€‚

    * åœ¨LeftFragmentç±»ä¸­é‡å†™Fragmentçš„ onCreateView()æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­é€šè¿‡LayoutInflaterçš„inflate()æ–¹æ³•åŠ è½½å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ã€‚

    * åœ¨è¦ä½¿ç”¨Fragmentçš„å¸ƒå±€æ–‡ä»¶ä¸­é€šè¿‡ <fragmnet> æ ‡ç­¾åŠ è½½Fragment

    ```
        <fragment 
            android:id="@+id/left_fragment"
            android:name="*.*.LeftFragment"
            android:layout_width=""
            android:layout_height="match_parent"
            android:layout_weight="1" />
    ```

        > é€šè¿‡Android:nameå±æ€§æ˜¾ç¤ºæŒ‡æ˜è¦æ·»åŠ çš„Fragmentçš„ç±»åï¼Œï¸âš ï¸æ³¨æ„ä¸€å®šè¦å°†ç±»åçš„åŒ…åä¹Ÿå¸¦ä¸Šã€‚


* åŠ¨æ€æ·»åŠ Fragment

    1. åˆ›å»ºå¾…æ·»åŠ çš„Fragmentçš„å®ä¾‹ã€‚
    2. è·å–FragmentManagerï¼Œåœ¨Activityä¸­å¯ä»¥ç›´æ¥è°ƒç”¨ **getSupportFragmentManager()** æ–¹æ³•å¾—åˆ°ã€‚
    3. å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œé€šè¿‡è°ƒç”¨ **beginTransaction()** æ–¹æ³•å¼€å¯ã€‚
    4. å‘å®¹å™¨å†…æ·»åŠ æˆ–æ›¿æ¢Fragmentï¼Œä¸€èˆ¬ç”¨ **replace()** æ–¹æ³•å®ç°ï¼Œéœ€è¦ä¼ å…¥å®¹å™¨çš„idå’Œå¾…æ·»åŠ çš„Fragmentçš„å®ä¾‹ã€‚
    5. æäº¤äº‹åŠ¡ï¼Œè°ƒç”¨ **commit()** æ–¹æ³•æ¥å®Œæˆ

    > åœ¨Fragmentä¸­æ¨¡æ‹Ÿè¿”å›æ ˆï¼Œåœ¨ FragmentTransaction äº‹åŠ¡æäº¤ã€è°ƒç”¨commit()æ–¹æ³•ã€‘å‰ï¼Œè°ƒç”¨ addToBackStack()æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªäº‹åŠ¡æ·»åŠ åˆ°è¿”å›æ ˆä¸­ã€‚


#### Fragmentçš„ç”Ÿå‘½å‘¨æœŸ

* Fragmentçš„çŠ¶æ€å’Œå›æ‰å‡½æ•°

    * è¿è¡ŒçŠ¶æ€
        > å½“ä¸€ä¸ªFragmentæ˜¯å¯è§çš„ï¼Œå¹¶ä¸”å®ƒæ‰€å…³è”çš„æ´»åŠ¨æ­£å¤„äºè¿è¡ŒçŠ¶æ€æ—¶ï¼Œè¯¥Fragmentä¹Ÿå¤„äºè¿è¡ŒçŠ¶æ€ã€‚

    * æš‚åœçŠ¶æ€
        > å½“ä¸€ä¸ªActivityè¿›å…¥æš‚åœçŠ¶æ€æ—¶(ç”±äºå¦ä¸€ä¸ªæœªå æ»¡å±å¹•çš„Activityè¢«æ·»åŠ åˆ°äº†æ ˆé¡¶)ï¼Œä¸å®ƒç›¸å…³è”çš„å¯è§Fragmentå°±ä¼šè¿›å…¥åˆ°æš‚åœçŠ¶æ€ã€‚

    * åœæ­¢çŠ¶æ€
        > å½“ä¸€ä¸ªActivityè¿›å…¥åœæ­¢çŠ¶æ€æ—¶ï¼Œä¸å®ƒç›¸å…³è”çš„Fragmentå°±ä¼šè¿›å…¥åˆ°åœæ­¢çŠ¶æ€ï¼Œæˆ–è€…é€šè¿‡è°ƒç”¨FragmentTransaction çš„ remove()ã€replace()æ–¹æ³•å°†Fragmentä»Activityä¸­ç§»é™¤ï¼Œä½†å¦‚æœåœ¨äº‹åŠ¡æäº¤å‰è°ƒç”¨addtoBackStack()æ–¹æ³•ï¼Œè¿™æ˜¯Fragmentä¹Ÿä¼šè¿›å…¥åˆ°åœæ­¢çŠ¶æ€ã€‚

    * é”€æ¯çŠ¶æ€
        > Fragment æ€»æ˜¯ä¾é™„äºActivityè€Œå­˜åœ¨çš„ï¼Œå› æ­¤å½“Activityè¢«é”€æ¯æ—¶ï¼Œä¸å®ƒç›¸å…³è”çš„Fragmentå°±ä¼šè¿›å…¥åˆ°é”€æ¯çŠ¶æ€ã€‚æˆ–è€…é€šè¿‡è°ƒç”¨FragmentTransaction çš„ remove()ã€replace()æ–¹æ³•å°†Fragmentä»Activityä¸­ç§»é™¤ï¼Œä½†å¦‚æœåœ¨äº‹åŠ¡æäº¤å‰æ²¡æœ‰è°ƒç”¨addtoBackStack()æ–¹æ³•ï¼Œè¿™æ˜¯Fragmentä¹Ÿä¼šè¿›å…¥åˆ°é”€æ¯çŠ¶æ€ã€‚

    >
    > **é‡ç‚¹çœ‹å‡ ä¸ªå›æ‰å‡½æ•°**
    >
    > > **onAttach()** å½“Fragmentå’ŒActivityå»ºç«‹å…³è”çš„æ—¶å€™è°ƒç”¨
    > 
    > > **onCreateView()** ä¸ºFragmentåˆ›å»ºè§†å›¾ï¼ˆåŠ è½½å¸ƒå±€ï¼‰æ—¶è°ƒç”¨
    >
    > > **onActivityCreated()** ç¡®ä¿ä¸Fragmentçš„ç›¸å…³Activityä¸€å®šå·²ç»åˆ›å»ºå®Œæ¯•çš„æ—¶å€™è°ƒç”¨
    >
    > > **onDestoryView()** å½“äºFragmentå…³è”çš„è§†å›¾è¢«ç§»é™¤çš„æ—¶å€™è°ƒç”¨
    >
    > > **onDetach()** æŒ¡Fragment å’Œ Activityè§£é™¤å…³è”çš„æ—¶å€™è°ƒç”¨ã€‚
    >

<div style="background-color:white; width: 317px; height: 847px;">

![Fragment LifeCycele](https://developer.android.google.cn/images/fragment_lifecycle.png)

</div><br/><br/>

#### åŠ¨æ€åŠ è½½å¸ƒå±€çš„æŠ€å·§

* ä½¿ç”¨é™å®šç¬¦ã€Qualifiersã€‘
    > ä¾‹å¦‚: layout-large

    **Androidä¸­ä¸€äº›å¸¸è§çš„é™å®šç¬¦**

<table border="2">
  <tr>
    <td>å±å¹•ç‰¹å¾</td>
    <td>é™å®šç¬¦</td>
    <td>æè¿°</td>
  </tr>
      <tr>
        <td rowspan="4">å¤§å°</td>
        <td>small</td>
        <td>æä¾›ç»™å°å±å¹•è®¾å¤‡çš„èµ„æº</td>
      </tr>
      <tr>
        <td>normal</td>
        <td>æä¾›ç»™ä¸­ç­‰å±å¹•è®¾å¤‡çš„èµ„æº</td>
      </tr>
      <tr>
        <td>large</td>
        <td>æä¾›ç»™å¤§å±å¹•è®¾å¤‡çš„èµ„æº</td>
      </tr>
      <tr>
        <td>xlarge</td>
        <td>æä¾›ç»™è¶…å¤§å±å¹•è®¾å¤‡çš„èµ„æº</td>
      </tr>
      <tr>
        <td rowspan="4">åˆ†è¾¨ç‡</td>
        <td>ldpi</td>
        <td>æä¾›ç»™ä½åˆ†è¾¨ç‡è®¾å¤‡çš„èµ„æºï¼ˆ120dpiä»¥ä¸‹ï¼‰</td>
      </tr>
      <tr>
        <td>mdpi</td>
        <td>æä¾›ç»™ä¸­ç­‰åˆ†è¾¨ç‡è®¾å¤‡çš„èµ„æºï¼ˆ120dpiåˆ°160dpiï¼‰</td>
      </tr>
      <tr>
        <td>hdpi</td>
        <td>æä¾›ç»™é«˜åˆ†è¾¨ç‡è®¾å¤‡çš„èµ„æºï¼ˆ160dpiåˆ°240dpiï¼‰</td>
      </tr>
      <tr>
        <td>xhdpi</td>
        <td>æä¾›ç»™è¶…é«˜åˆ†è¾¨ç‡è®¾å¤‡çš„èµ„æºï¼ˆ240dpiåˆ°320dpiï¼‰</td>
      </tr>
      <tr>
        <td rowspan="2">æ–¹å‘</td>
        <td>land</td>
        <td>æä¾›ç»™æ¨ªå±è®¾å¤‡çš„èµ„æº</td>
      </tr>
      <tr>
        <td>port</td>
        <td>æä¾›ç»™ç«–å±è®¾å¤‡çš„èµ„æº</td>
      </tr>
</table><br/><br/>

-----
-----


## ç¬¬äº”ç«  *Broadcast Receiver*


-----

* Androidä¸­å¹¿æ’­åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š1ã€<span style="color: red;"><b>æ ‡å‡†å¹¿æ’­</b></span> 2ã€<span style="color: red;"><b>æœ‰åºå¹¿æ’­</b></span>

    * æ ‡å‡†å¹¿æ’­ã€Normal Broadcastsã€‘ï¼šæ˜¯ä¸€ç§å®Œå…¨å¼‚æ­¥æ‰§è¡Œçš„å¹¿æ’­ï¼Œåœ¨å¹¿æ’­å‘å‡ºä¹‹åï¼Œæ‰€æœ‰çš„å¹¿æ’­æ¥æ”¶å™¨å‡ ä¹éƒ½ä¼šåœ¨åŒä¸€æ—¶åˆ»æ¥æ”¶åˆ°è¿™æ¡å¹¿æ’­æ¶ˆæ¯ã€‚è¿™ç§å¹¿æ’­çš„æ•ˆç‡ä¼šæ¯”è¾ƒé«˜ï¼Œä½†å®ƒæ˜¯æ— æ³•è¢«æˆªæ–­çš„ã€‚

    * æœ‰åºå¹¿æ’­ã€Ordered Broadcastsã€‘ï¼šæ˜¯ä¸€ç§åŒæ­¥æ‰§è¡Œçš„å¹¿æ’­ï¼Œåœ¨å¹¿æ’­å‘å‡ºä¹‹åï¼ŒåŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨èƒ½å¤Ÿæ”¶åˆ°è¿™æ¡å¹¿æ’­æ¶ˆæ¯ï¼Œå½“è¿™ä¸ªå¹¿æ’­æ¥æ”¶å™¨ä¸­çš„é€»è¾‘æ‰§è¡Œå®Œæ¯•åï¼Œå¹¿æ’­æ‰ä¼šç»§ç»­ä¼ é€’ã€‚æ‰€ä»¥æ­¤æ—¶å¹¿æ’­æ¥æ”¶å™¨æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œä¼˜å…ˆçº§é«˜çš„å¹¿æ’­æ¥æ”¶å™¨å°±å¯ä»¥å…ˆæ”¶åˆ°å¹¿æ’­æ¶ˆæ¯ï¼Œå¹¶ä¸”å‰é¢çš„å¹¿æ’­æ¥æ”¶å™¨å¯ä»¥æˆªæ–­æ­£åœ¨ä¼ é€’çš„å¹¿æ’­ï¼Œè¿™æ ·åé¢çš„å¹¿æ’­æ¥æ”¶å™¨å°±æ— æ³•æ”¶åˆ°å¹¿æ’­æ¶ˆæ¯äº†ã€‚

* æ³¨å†Œå¹¿æ’­ï¼š1ã€<span style="color: red;"><b>åŠ¨æ€æ³¨å†Œ</b></span> 2ã€<span style="color: red;"><b>é™æ€æ³¨å†Œ</b></span>

    * åŠ¨æ€æ³¨å†Œï¼šåœ¨ä»£ç ä¸­æ³¨å†Œå¹¿æ’­ï¼Œ registerReceiver(broadcastReceiver, intentFilter);
    * é™æ€æ³¨å†Œï¼šåœ¨ *AndroidManifest.xml* ä¸­æ³¨å†Œå¹¿æ’­

* åˆ›å»ºå¹¿æ’­æ¥æ”¶å™¨ï¼šæ–°å»ºä¸€ä¸ªClassï¼Œç»§æ‰¿BroadcastReceiverï¼Œé‡å†™çˆ¶ç±»çš„onReceive()æ–¹æ³•ã€‚è¿™æ ·å½“æœ‰å¹¿æ’­åˆ°æ¥æ—¶ï¼ŒonReceive()æ–¹æ³•å°±ä¼šå¾—åˆ°æ‰§è¡Œã€‚

* å‘é€æ ‡å‡†å¹¿æ’­ï¼š *<b>sendBroadcast(intent);</b>*

* å‘é€æœ‰åºå¹¿æ’­ï¼š *<b>sendOrderedBroadcast(intent, null);</b>*  ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªä¸æƒé™ç›¸å…³çš„å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬ä¼ nullã€‚

  è®¾å®šæœ‰åºå¹¿æ’­çš„æ¥æ”¶é¡ºåºï¼šåœ¨ *AndroidMainfest.xml* ä¸­ <span style="color: red;"><b>receiver</b></span> ä¸­çš„ <span style="color: red;"><b>intent-filter android:priority="100"</b></span> ä¸­è®¾ç½®å¹¿æ’­æ¥æ”¶å™¨çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§æ¯”è¾ƒé«˜çš„å¹¿æ’­æ¥æ”¶å™¨å¯ä»¥å…ˆæ”¶åˆ°å¹¿æ’­ã€‚ *<b>abortBroadcast()</b>* å¯ä»¥æˆªæ–­æœ‰åºå¹¿æ’­çš„å‘é€

* æœ¬åœ°å¹¿æ’­ **åœ¨æœ¬åœ°å¹¿æ’­æœºåˆ¶ä¸­ï¼Œå¹¿æ’­åªèƒ½åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨è¿›è¡Œä¼ é€’ï¼Œå¹¶ä¸”å¹¿æ’­æ¥æ”¶å™¨åªèƒ½æ¥æ”¶æ¥è‡ªæœ¬åº”ç”¨ç¨‹åºå‘å‡ºçš„å¹¿æ’­**
  * æœ¬åœ°å¹¿æ’­ä¸»è¦æ˜¯ä½¿ç”¨ *<span style="color: red;"><b>LocalBroadcastManager</b></span>* æ¥å¯¹å¹¿æ’­è¿›è¡Œç®¡ç†
    * è·å–å®ä¾‹å¯¹è±¡ 
      
      ```
      LocalBroadcastManager localBroadcastManager = LocalBroadcastManager.getInstance(context);
      ```
    * æ³¨å†Œæœ¬åœ°å¹¿æ’­ç›‘å¬å™¨ 
      ```
      IntentFilter intentFilter = new IntentFilter();
      intentFilter.addAction("org.liti.app.broadcast.LOCAL_BROADCAST");
      LocalBroadcasrReceiver localBroadcastReceiver = new LocalBroadcasrReceiver();
      localBroadcastManager.registerReceiver(localBroadcastReceiver, intentFilter);
      ```
    * å‘é€æœ¬åœ°å¹¿æ’­
      ```
      Intent intent = new Intent("org.liti.app.broadcast.LOCAL_BROADCAST");
      localBroadcastManager.sendBroadcast(intent);
      ```
    * æ³¨é”€æœ¬åœ°å¹¿æ’­ç›‘å¬å™¨
      ```
      localBroadcastManager.unregisterReceiver(localBroadcastReceiver);
      ```

  * æœ¬åœ°å¹¿æ’­æ˜¯æ— æ³•é€šè¿‡é™æ€æ³¨å†Œçš„æ–¹å¼æ¥æ¥æ”¶çš„
  
  * æœ¬åœ°å¹¿æ’­çš„ä¼˜åŠ¿
    > 
    > * å¯ä»¥æ˜ç¡®åœ°çŸ¥é“æ­£åœ¨å‘é€çš„å¹¿æ’­ä¸ä¼šç¦»å¼€æˆ‘ä»¬çš„ç¨‹åºï¼Œå› æ­¤ä¸å¿…æ‹…å¿ƒæœºå¯†æ•°æ®æ³„éœ²
    > 
    > * å…¶ä»–ç¨‹åºæ— æ³•å°†å¹¿æ’­å‘é€åˆ°æˆ‘ä»¬çš„ç¨‹åºå†…éƒ¨ï¼Œå› æ­¤ä¸éœ€è¦æ‹…å¿ƒä¼šæœ‰å®‰å…¨æ¼æ´çš„éšæ‚£
    >
    > * å‘é€æœ¬åœ°å¹¿æ’­æ¯”å‘é€ç³»ç»Ÿå…¨å±€å¹¿æ’­ä¼šæ›´åŠ é«˜æ•ˆ
    > 

* **Git ç‰ˆæœ¬æ§åˆ¶å·¥å…·**
  * åˆ›å»ºä»£ç ä»“åº“
    * é…ç½®èº«ä»½
      ```
      git config --global user.name "Tony"
      git config --global user.email "tony@gmail.com"
      ```
    *é…ç½®å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨åŒæ ·çš„å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸï¼Œåªéœ€è¦å°†æœ€åçš„åå­—å’Œé‚®ç®±åœ°å€å»æ‰å³å¯*

    * åˆ›å»ºä»£ç ä»“åº“(Repository)

      *ä»“åº“ï¼Œæ˜¯ç”¨äºä¿å­˜ç‰ˆæœ¬ç®¡ç†æ‰€éœ€ä¿¡æ¯çš„åœ°æ–¹ï¼Œæ‰€æœ‰æœ¬åœ°æäº¤çš„ä»£ç éƒ½ä¼šè¢«æäº¤åˆ°ä»£ç ä»“åº“ä¸­ï¼Œå¦‚æœæœ‰éœ€è¦è¿˜å¯ä»¥å†æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­*

      åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹é¢ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥å®Œæˆåˆ›å»ºä»£ç ä»“åº“çš„æ“ä½œã€‚
      ```
      git init
      ```
      ä»“åº“åˆ›å»ºå®Œæˆåï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªéšè—çš„ <span style="color: red;"><b><i>.git</i></b></span> ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯ç”¨æ¥è®°å½•æœ¬åœ°æ‰€æœ‰çš„Gitæ“ä½œçš„ã€‚å¦‚æœæƒ³è¦åˆ é™¤æœ¬åœ°ä»“åº“ï¼Œåªéœ€è¦åˆ é™¤è¿™ä¸ªç›®å½•å°±å¯ä»¥äº†ã€‚

  * æäº¤æœ¬åœ°ä»£ç 
    ```
    git add æ–‡ä»¶å //æ·»åŠ å•ä¸ªæ–‡ä»¶åˆ°ä»“åº“
    git add ç›®å½•å //æ·»åŠ æŸä¸ªç›®å½•åŠç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶åˆ°ä»“åº“
    git add .     //æ·»åŠ å½“å‰ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶åˆ°ä»“åº“

    git commit -m "æäº¤åˆ°ä»“åº“çš„ä»£ç çš„å¤‡æ³¨ä¿¡æ¯" // çœŸæ­£çš„æäº¤ä»£ç åˆ°æœ¬åœ°ä»“åº“
    ```

-----
-----

## ç¬¬å…­ç«  æ•°æ®å­˜å‚¨ï¼Œæ•°æ®æŒä¹…åŒ–

------

#### æŒä¹…åŒ–æŠ€æœ¯

>
> æ•°æ®æŒä¹…åŒ–å°±æ˜¯æŒ‡å°†å†…å­˜ä¸­çš„ç¬æ—¶æ•°æ®ä¿å­˜åˆ°å­˜å‚¨è®¾å¤‡ä¸­
>
> ä¿å­˜åœ¨å†…å­˜ä¸­çš„æ•°æ®æ˜¯å¤„äºç¬æ—¶çŠ¶æ€çš„
>
> ä¿å­˜åœ¨å­˜å‚¨è®¾å¤‡ä¸­å›½å¹´çš„æ•°æ®æ˜¯å¤„äºæŒä¹…çŠ¶æ€çš„
>
> æŒä¹…åŒ–æŠ€æœ¯æ˜¯æä¾›äº†ä¸€ç§æœºåˆ¶å¯ä»¥è®©æ•°æ®è½½ç¬æ—¶çŠ¶æ€å’ŒæŒä¹…çŠ¶æ€ä¹‹é—´è¿›è¡Œåˆ‡æ¢
>

* Androidç³»ç»Ÿä¸­çš„æ•°æ®æŒä¹…åŒ–åŠŸèƒ½
    * æ–‡ä»¶å­˜å‚¨
    * SharedPreferenceå­˜å‚¨
    * æ•°æ®åº“å­˜å‚¨

    *é™¤äº†è¿™ä¸‰ç§æ–¹å¼å¤–ï¼Œè¿˜å¯ä»¥å°†æ•°æ®ä¿å­˜åœ¨æ‰‹æœºçš„SDå¡ä¸­*

-----

#### æ–‡ä»¶å­˜å‚¨

* å°†æ•°æ®å­˜å‚¨åˆ°æ–‡ä»¶ä¸­
    Contextç±»ä¸­æä¾›ä¸€ä¸ª openFileOutput(param1, param2) æ–¹æ³•ï¼Œç”¨äºå°†æ•°æ®å­˜å‚¨åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

    * ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶åï¼Œåœ¨æ–‡ä»¶åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªåç§°ï¼Œâš ï¸æ³¨æ„è¿™é‡Œåˆ¶å®šçš„æ–‡ä»¶åä¸å¯ä»¥åŒ…å«è·¯å¾„ï¼Œå› ä¸ºæ‰€æœ‰çš„æ–‡ä»¶éƒ½é»˜è®¤å­˜å‚¨åˆ° <span style="color: red;"><b><i>/data/data/< package name >/files/</i></b></span> ç›®å½•ä¸‹é¢çš„ã€‚
    
    * ç¬¬äºŒå‚æ•°æ˜¯æ–‡ä»¶çš„æ“ä½œæ¨¡å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§æ¨¡å¼å¯é€‰ï¼Œ<span style="color: red;"><b>MODE_PRIVATE</b></span> å’Œ <span style="color: red;"><b>MODE_APPEND</b></span>
        
        * MODE_PRIVATEï¼šæ˜¯é»˜è®¤çš„æ“ä½œæ¨¡å¼ï¼Œè¡¨ç¤ºå½“æŒ‡å®šåŒæ ·æ–‡ä»¶åçš„æ—¶å€™ï¼Œæ‰€å†™å…¥çš„å†…å®¹å°†ä¼šè¦†ç›–åŸæ–‡ä»¶ä¸­çš„å†…å®¹
        
        * MODE_APPENDï¼šè¡¨ç¤ºå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨å°±å¾€æ–‡ä»¶é‡Œé¢è¿½åŠ å†…å®¹ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºæ–°æ–‡ä»¶ã€‚
        
        âš ï¸å…¶å®æ–‡ä»¶çš„æ“ä½œæ¨¡å¼æœ¬æ¥è¿˜æœ‰å¦å¤–ä¸¤ç§ï¼Œ<span style="color: yellow;"><b>MODE_WORLD_READABLE</b></span> å’Œ <span style="color: yellow;"><b>MODE_WORLD_WRITEABLE</b></span>ï¼Œè¿™ä¸¤ç§æ¨¡å¼è¡¨ç¤ºå…è®¸å…¶ä»–çš„åº”ç”¨ç¨‹åºå¯¹æˆ‘ä»¬ç¨‹åºä¸­çš„æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œä¸è¿‡ç”±äºè¿™ä¸¤ç§æ¨¡å¼è¿‡äºå±é™©ï¼Œå¾ˆå®¹æ˜“å¼•èµ·åº”ç”¨çš„å®‰å…¨æ€§æ¼æ´ï¼Œå·²åœ¨ <span style="color: green;"><b>Android 4.2</b></span> ç‰ˆæœ¬ä¸­è¢«åºŸå¼ƒ
        
        * openFileOutput(param1, param2) æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªFileOutputStreamå¯¹è±¡ï¼Œå¾—åˆ°è¿™ä¸ªå¯¹è±¡åå¯ä»¥ç”¨ Java æµçš„æ–¹å¼å°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶

* ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®
    
    Contextç±»ä¸­æä¾›ä¸€ä¸ª openFileInput() æ–¹æ³•ï¼Œç”¨äºä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚è¿™ä¸ªæ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³è¦è¯»å–çš„æ–‡ä»¶åã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ° <span style="color: red;"><b><i>/data/data/< package name >/files/</i></b></span> ç›®å½•ä¸‹å»åŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªFileInputStream å¯¹è±¡ï¼Œå¾—åˆ°è¿™ä¸ªå¯¹è±¡åå¯ä»¥ç”¨ Java æµçš„æ–¹å¼å°†æ•°æ®è¯»å–å‡ºæ¥ã€‚       

-----

#### SharedPreferences å­˜å‚¨
  
> *SharedPreferences* æ˜¯ä½¿ç”¨é”®å€¼å¯¹çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®çš„ã€‚
>   
> *SharedPreferences* è¿˜æ”¯æŒå¤šç§ä¸åŒçš„æ•°æ®ç±»å‹å­˜å‚¨ã€‚

* è¦æƒ³ä½¿ç”¨ **SharedPreferences** æ¥å­˜å‚¨æ•°æ®ï¼Œé¦–å…ˆè¦è·å–åˆ° **SharedPreferences** å¯¹è±¡ã€‚
    
    Androidä¸­ä¸»è¦æä¾›ä¸‰ç§æ–¹æ³•ç”¨äºå¾—åˆ° **SharedPreferences** å¯¹è±¡ï¼š
        
    * 1ã€Contextç±»ä¸­çš„ **getSharedPreferences()** æ–¹æ³•
        > æ­¤æ–¹æ³•æ¥æ”¶è¿ä¸ªå‚æ•°ï¼š
        >   * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç”¨äºæŒ‡å®š SharedPreferences é—®ä»·çš„åç§°ï¼Œå¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨å°±ä¼šåˆ›å»ºä¸€ä¸ªã€‚
        >   * ç¬¬äºŒä¸ªå‚æ•°ï¼šç”¨äºæŒ‡å®šæ“ä½œæ¨¡å¼ï¼Œç›®å‰åªæœ‰ **MODE_PRIVATE** ä¸€ç§æ¨¡å¼å¯é€‰ï¼Œå®ƒæ˜¯é»˜è®¤çš„æ“ä½œæ¨¡å¼ï¼Œå’Œç›´æ¥ä¼ å…¥ **0** æ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œè¡¨ç¤ºåªæœ‰å½“å‰çš„åº”ç”¨ç¨‹åºæ‰å¯ä»¥å¯¹è¿™ä¸ª SharedPreferences æ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚
        >       > å…¶ä»–å‡ ç§æ¨¡å¼å‡å·²è¢«åºŸå¼ƒï¼Œ<span style="color: yellow;"><b>MODE_WORLD_READABLE</b></span> å’Œ <span style="color: yellow;"><b>MODE_WORLD_WRITEABLE</b></span> è¿™ä¸¤ç§æ¨¡å¼åœ¨ **Android 4.2** ä¸­è¢«åºŸå¼ƒï¼Œ<span style="color: yellow;"><b>MODE_MULTI_PROCESS</b></span> æ¨¡å¼åœ¨**Android 6.0** ä¸­è¢«åºŸå¼ƒ

    * 2ã€Activityç±»ä¸­çš„ **getPreferences()** æ–¹æ³•
        > è¿™ä¸ªæ–¹æ³•å’Œ Context ä¸­çš„ getSharedPreferences() æ–¹æ³•å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡å®ƒåªæ¥æ”¶ä¸€ä¸ª **æ“ä½œæ¨¡å¼** å‚æ•°ï¼Œè¿™ä¸ªæ–¹æ³•å°†è‡ªåŠ¨ä½¿ç”¨å½“å‰æ´»åŠ¨çš„ç±»åä½œä¸º SharedPreferences çš„æ–‡ä»¶å 
 
    * 3ã€PreferenceManagerç±»ä¸­çš„ **getDefaultSharedPreferences()** æ–¹æ³•
        > è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ Context ä½œä¸ºå‚æ•°ï¼Œå¹¶è‡ªåŠ¨å°†å½“å‰åº”ç”¨ç¨‹åºçš„åŒ…åä½œä¸ºå‰ç¼€æ¥å‘½å SharedPreferences æ–‡ä»¶ã€‚

    > SharedPreferences æ–‡ä»¶éƒ½æ˜¯å­˜æ”¾åœ¨ **/data/data/< package name >/shared_prefs/** ç›®å½•ä¸‹çš„ã€‚

* å¾—åˆ° **SharedPreferences** å¯¹è±¡åï¼Œå¯ä»¥å‘ *SharedPreferences* æ–‡ä»¶ä¸­å­˜å‚¨æ•°æ®äº†

    * 1ã€è°ƒç”¨ SharedPreferences å¯¹è±¡çš„ **edit()** æ–¹æ³•æ¥è·å–ä¸€ä¸ª **SharedPreferences.Editor** å¯¹è±¡ã€‚

    * 2ã€å‘ SharedPreferences.Editor å¯¹è±¡ä¸­æ·»åŠ æ•°æ®
        > ä¾‹å¦‚ï¼š
        >   * æ·»åŠ ä¸€ä¸ªå¸ƒå°”å‹æ•°æ®ï¼šputBoolean()æ–¹æ³•
        >   * æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®ï¼šputString()æ–¹æ³•
        >   
    
    * 3ã€è°ƒç”¨SharedPreferences.Editor.apply()æ–¹æ³•å°†æ·»åŠ çš„æ•°æ®æäº¤ï¼Œå®Œæˆæ•°æ®å­˜å‚¨æ“ä½œ

    * 4ã€è°ƒç”¨SharedPreferences.Editor.clear()æ–¹æ³•å¯ä»¥å°†SharedPreferencesæ–‡ä»¶ä¸­çš„æ•°æ®å…¨éƒ¨æ¸…é™¤æ‰ã€‚

* ä» SharedPreferences ä¸­è¯»å–æ•°æ®
    > SharedPreferences å¯¹è±¡æä¾›äº†ä¸€äº›åˆ—çš„ get æ–¹æ³•ç”¨äºå¯¹å­˜å‚¨çš„æ•°æ®è¿›è¡Œè¯»å–ã€‚
    > 
    > > è¿™äº› get æ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚
    > > * ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ key ï¼Œä¼ å…¥å­˜å‚¨æ•°æ®æ—¶ä½¿ç”¨çš„ key å°±å¯ä»¥å¾—åˆ°ç›¸åº”çš„å€¼
    > > * ç¬¬äºŒä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼ï¼Œå³è¡¨ç¤ºå½“ä¼ å…¥çš„keyæ‰¾ä¸åˆ°å¯¹åº”çš„å€¼æ—¶ï¼Œå°±ä¼šè¿”å›é»˜è®¤å€¼ã€‚

-----

### SQLiteæ•°æ®åº“å­˜å‚¨

#### 1ã€åˆ›å»ºæ•°æ®åº“
> Android ä¸ºäº†è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿åœ°ç®¡ç†æ•°æ®åº“ï¼Œä¸“é—¨æä¾›äº†ä¸€ä¸ª **SQLiteOpenHelper** å¸®åŠ©ç±»ï¼Œå€ŸåŠ©è¿™ä¸ªç±»å¯ä»¥éå¸¸ç®€å•çš„å®ç°å¯¹æ•°æ®åº“è¿›è¡Œ **åˆ›å»º** å’Œ **å‡çº§**ã€‚

* **SQLiteOpenHelper** æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½¿ç”¨æ—¶éœ€è¦åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿ *SQLiteOpenHelper*ç±»
        > *SQLiteOpenHelper* ç±»ä¸­æœ‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œ**onCreate()** å’Œ **onUpgrade()**ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨è‡ªå·±çš„å®ç°ç±»ä¸­åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­å»å®ç°åˆ›å»ºã€å’Œå‡çº§æ•°æ®åº“çš„é€»è¾‘ã€‚

* **SQLiteOpenHelper** ç±»ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„å®ä¾‹æ–¹æ³•ï¼š**getReadableDatabase()** å’Œ **getWritableDatabase()**ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥åˆ›å»ºæˆ–æ‰“å¼€ä¸€ä¸ªç°æœ‰æ•°æ®åº“ï¼ˆå¦‚æœæ•°æ®åº“å·²å­˜åœ¨åˆ™ç›´æ¥æ‰“å¼€ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯å¯¹æ•°æ®åº“è¿›è¡Œè¯»å†™æ“ä½œçš„å¯¹è±¡ã€‚
        > å½“æ•°æ®åº“ä¸å¯å†™å…¥çš„æ—¶å€™ï¼ˆå¦‚ç£ç›˜ç©ºé—´å·²æ»¡ï¼‰ï¼ŒgetReadableDatabase()æ–¹æ³•è¿”å›çš„å¯¹è±¡å°†ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€æ•°æ®åº“ï¼Œè€ŒgetWritableDatabase()æ–¹æ³•åˆ™å°†æŠ›å‡ºå¼‚å¸¸ã€‚

* **SQLiteOpenHelper**ä¸­æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•å¯ä¾›é‡å†™ï¼Œä¸€èˆ¬ä½¿ç”¨å‚æ•°å°‘ä¸€ç‚¹çš„é‚£ä¸ªæ„é€ æ–¹æ³•å°±å¯ä»¥äº†ã€‚

> **SQLiteæ•°æ®åº“çš„æ•°æ®ç±»å‹**
> > * **integer** ä»£è¡¨æ•´å‹
> > * **real** ä»£è¡¨æµ®ç‚¹å‹
> > * **text** ä»£è¡¨æ–‡æœ¬ç±»å‹
> > * **blob** ä»£è¡¨äºŒè¿›åˆ¶ç±»å‹
    
```
    /**
     * æ„é€ å‡½æ•°
     *
     * @param context ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¿…é¡»è¦æœ‰å®ƒæ‰èƒ½å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ
     * @param name æ•°æ®åº“åï¼Œåˆ›å»ºæ•°æ®åº“æ—¶ä½¿ç”¨çš„å°±æ˜¯è¿™é‡ŒæŒ‡å®šçš„åå­—
     * @param factory å…è®¸æˆ‘ä»¬åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™è¿”å›çš„ä¸€ä¸ªè‡ªå®šä¹‰çš„Cursorï¼Œä¸€èˆ¬éƒ½æ˜¯ä¼ null
     * @param version å½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œå‡çº§æ“ä½œ
     *
     */
    public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
        mContext = context;
    }

    // æ„é€ å‡½æ•°2
    public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version, DatabaseErrorHandler errorHandler, Context mContext) {
        super(context, name, factory, version, errorHandler);
        this.mContext = mContext;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_BOOK);

        db.execSQL(CREATE_CATEGORY); // åœ¨æ•°æ®åº“ä¸­æ·»åŠ ä¸€å¼ æ–°è¡¨
        Toast.makeText(mContext, "åˆ›å»ºæ•°æ®è¡¨æˆåŠŸ", Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

//        db.execSQL("drop table if exists Book");
//        db.execSQL("drop table if exists Category");
//        onCreate(db);
    }
```

#### 2ã€æ•°æ®åº“æ“ä½œ
> æ•°æ®åº“æ“ä½œåˆ†ä¸º4ç§ï¼Œå³CURDï¼Œå…¶ä¸­Cä»£è¡¨åˆ›å»ºï¼ˆCreateï¼‰ï¼ŒRä»£è¡¨æŸ¥è¯¢ï¼ˆRetrieveï¼‰ï¼ŒUä»£è¡¨æ›´æ–°ï¼ˆUpdateï¼‰ï¼ŒDä»£è¡¨åˆ é™¤ï¼ˆDeleteï¼‰ï¼Œæ¯ç§æ“ä½œå¯¹åº”ä¸€ç§SQLå‘½ä»¤ã€‚
> 
> * æ·»åŠ æ•°æ®æ—¶ä½¿ç”¨ insert
> * æŸ¥è¯¢æ•°æ®æ—¶ä½¿ç”¨ select
> * æ›´æ–°æ•°æ®æ—¶ä½¿ç”¨ update
> * åˆ é™¤æ•°æ®æ—¶ä½¿ç”¨ delete
>
> Android æä¾›äº†ä¸€ç³»åˆ—çš„è¾…åŠ©æ€§æ–¹æ³•ï¼Œä½¿å¾—åœ¨Androidä¸­å³ä½¿ä¸ç¼–å†™SQLè¯­å¥ï¼Œä¹Ÿèƒ½å¤Ÿè½»æ¾å®Œæˆæ‰€æœ‰çš„CRUDæ“ä½œã€‚
> 
> æˆ‘ä»¬å€ŸåŠ©è°ƒç”¨ SQLiteOpenHelper çš„ getReadableDatabase() å’Œ getWritableDatabase()æ–¹æ³•è¿”å›çš„ **SQLiteDatabase** å¯¹è±¡ï¼Œå¯¹æ•°æ®åº“è¿›è¡ŒCRUDæ“ä½œ 

* 1ã€æ·»åŠ æ•°æ®

    > SQLiteDatabase ä¸­æä¾›äº†ä¸€ä¸ªinsert()æ–¹æ³•ç”¨äºæ·»åŠ æ•°æ®ï¼Œæ¥æ”¶3ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹ï¼š
    > * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨åï¼ŒæŒ‡å®šå‘é‚£å¼ æ•°æ®è¡¨é‡Œæ·»åŠ æ•°æ®
    > * ç¬¬äºŒä¸ªå‚æ•°ï¼šç”¨äºåœ¨æœªæŒ‡å®šæ·»åŠ æ•°æ®çš„æƒ…å†µä¸‹ç»™æŸäº›å¯ä¸ºç©ºçš„åˆ—è‡ªåŠ¨èµ‹å€¼NULLï¼Œä¸€èˆ¬ä¸ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œç›´æ¥ä¼ å…¥nullå³å¯
    > * ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ˜¯ä¸€ä¸ª ContentValues å¯¹è±¡ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—çš„put()æ–¹æ³•é‡è½½ï¼Œç”¨äºå‘ContentValuesä¸­æ·»åŠ æ•°æ®

    ```
        /**
         * Convenience method for inserting a row into the database.
         *
         * @param table the table to insert the row into
         * @param nullColumnHack optional; may be <code>null</code>.
         *            SQL doesn't allow inserting a completely empty row without
         *            naming at least one column name.  If your provided <code>values</code> is
         *            empty, no column names are known and an empty row can't be inserted.
         *            If not set to null, the <code>nullColumnHack</code> parameter
         *            provides the name of nullable column name to explicitly insert a NULL into
         *            in the case where your <code>values</code> is empty.
         * @param values this map contains the initial column values for the
         *            row. The keys should be the column names and the values the
         *            column values
         * @return the row ID of the newly inserted row, or -1 if an error occurred
         */
        public long insert(String table, String nullColumnHack, ContentValues values);
    ```

    ä½¿ç”¨ç¤ºä¾‹ä»£ç ç‰‡æ®µ
    ```
        SQLiteDatabase db = dbHelper.getWritableDatabase();
        ContentValues values = new ContentValues();

        // å¼€å§‹ç»„è£…ç¬¬ä¸€ç»„æ•°æ®
        values.put("name", "The Da Vinci Code");
        values.put("author", "Dan Brown");
        values.put("pages", 454);
        values.put("price", 16.96);

        //public long insert(String table, String nullColumnHack, ContentValues values);
        db.insert("Book", null, values); // æ’å…¥ç¬¬ä¸€æ¡æ•°æ®
        values.clear();  
    ```

* 2ã€æ›´æ–°æ•°æ®

    > SQLiteDatabase ä¸­æä¾›äº†ä¸€ä¸ªupdate()æ–¹æ³•ç”¨äºæ›´æ–°æ•°æ®ï¼Œæ¥æ”¶4ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹ï¼š
    > * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨å
    > * ç¬¬äºŒä¸ªå‚æ•°ï¼šContentValueså¯¹è±¡ï¼Œè¦æŠŠæ›´æ–°çš„æ•°æ®åœ¨è¿™é‡Œç»„è£…
    > * ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬å››ä¸ªå‚æ•°ï¼šç”¨äºçº¦æŸæ›´æ–°æŸä¸€è¡Œæˆ–æŸå‡ è¡Œä¸­çš„æ•°æ®ï¼Œä¸æŒ‡å®šçš„è¯å°±é»˜è®¤æ›´æ–°æ‰€æœ‰è¡Œ

    ```
        /**
         * Convenience method for updating rows in the database.
         *
         * @param è¡¨åã€table the table to update inã€‘
         * @param ContentValueså¯¹è±¡ã€values a map from column names to new column values. null is aã€‘
         *            valid value that will be translated to NULL.
         * @param whereClause the optional WHERE clause to apply when updating.
         *            Passing null will update all rows.
         * @param whereArgs You may include ?s in the where clause, which
         *            will be replaced by the values from whereArgs. The values
         *            will be bound as Strings.
         * @return the number of rows affected
         */
        public int update(String table, ContentValues values, String whereClause, String[] whereArgs);
    ```

    ä½¿ç”¨ç¤ºä¾‹ä»£ç ç‰‡æ®µ

    ```
        SQLiteDatabase db = dbHelper.getWritableDatabase();
        ContentValues values = new ContentValues();

        values.put("price", 10.99);

        db.update("Book", values, "name = ?", new String[]{"The Da Vinci Code"});
    ```

* 3ã€åˆ é™¤æ•°æ®

    > SQLiteDatabase ä¸­æä¾›äº†ä¸€ä¸ªdelete()æ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥åˆ é™¤æ•°æ®ï¼Œæ¥æ”¶3ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹ï¼š
    > * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨å
    > * ç¬¬äºŒä¸ªå‚æ•°ã€ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ˜¯ç”¨äºçº¦æŸåˆ é™¤æŸä¸€è¡Œæˆ–æŸå‡ è¡Œçš„æ•°æ®ï¼Œä¸æŒ‡å®šçš„è¯é»˜è®¤åˆ é™¤æ‰€æœ‰è¡Œ
    >

    ```
        /**
         * Convenience method for deleting rows in the database.
         *
         * @param table the table to delete from
         * @param whereClause the optional WHERE clause to apply when deleting.
         *            Passing null will delete all rows.
         * @param whereArgs You may include ?s in the where clause, which
         *            will be replaced by the values from whereArgs. The values
         *            will be bound as Strings.
         * @return the number of rows affected if a whereClause is passed in, 0
         *         otherwise. To remove all rows and get a count pass "1" as the
         *         whereClause.
         */
        public int delete(String table, String whereClause, String[] whereArgs);
    ```

    ä½¿ç”¨ç¤ºä¾‹ä»£ç ç‰‡æ®µ

    ```
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        db.delete("Book", "pages > ?", new String[]{"500"});
    ```

* 4ã€æŸ¥è¯¢æ•°æ®

    > SQL å…¨ç§°æ˜¯ Structured Query Languageã€ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ã€‘
    >
    > SQLiteDatabase ä¸­æä¾›äº†ä¸€ä¸ªquery()æ–¹æ³•ï¼Œç”¨äºå¯¹æ•°æ®è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ¯”è¾ƒå¤æ‚ï¼Œæœ€çŸ­çš„é‡è½½æ–¹æ³•ä¹Ÿéœ€è¦ä¼ å…¥7ä¸ªå‚æ•°ã€‚
    > * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨å
    > * ç¬¬äºŒä¸ªå‚æ•°ï¼šç”¨äºæŒ‡å®šå»æŸ¥è¯¢å“ªå‡ åˆ—ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰åˆ—
    > * ç¬¬ä¸‰ä¸ªå‚æ•°ã€ç¬¬å››ä¸ªå‚æ•°ï¼šç”¨äºçº¦æŸæŸ¥è¯¢æŸä¸€è¡Œæˆ–æŸå‡ è¡Œçš„æ•°æ®ï¼Œä¸æŒ‡å®šåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰è¡Œçš„æ•°æ®
    > * ç¬¬äº”ä¸ªå‚æ•°ï¼šç”¨äºæŒ‡å®šéœ€è¦å» group byçš„åˆ—ï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤ºä¸å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œ groupby æ“ä½œ
    > * ç¬¬å…­ä¸ªå‚æ•°ï¼šç”¨äºå¯¹groupbyä¹‹åçš„æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥è¿‡æ»¤ï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤ºä¸è¿›è¡Œè¿‡æ»¤
    > * ç¬¬ä¸ƒä¸ªå‚æ•°ï¼šç”¨äºæŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ’åºæ–¹å¼ï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„æ’åºæ–¹å¼ã€‚
    >

```
    /**
     * Query the given table, returning a {@link Cursor} over the result set.
     *
     * @param table The table name to compile the query against.
     * @param columns A list of which columns to return. Passing null will
     *            return all columns, which is discouraged to prevent reading
     *            data from storage that isn't going to be used.
     * @param selection A filter declaring which rows to return, formatted as an
     *            SQL WHERE clause (excluding the WHERE itself). Passing null
     *            will return all rows for the given table.
     * @param selectionArgs You may include ?s in selection, which will be
     *         replaced by the values from selectionArgs, in order that they
     *         appear in the selection. The values will be bound as Strings.
     * @param groupBy A filter declaring how to group rows, formatted as an SQL
     *            GROUP BY clause (excluding the GROUP BY itself). Passing null
     *            will cause the rows to not be grouped.
     * @param having A filter declare which row groups to include in the cursor,
     *            if row grouping is being used, formatted as an SQL HAVING
     *            clause (excluding the HAVING itself). Passing null will cause
     *            all row groups to be included, and is required when row
     *            grouping is not being used.
     * @param orderBy How to order the rows, formatted as an SQL ORDER BY clause
     *            (excluding the ORDER BY itself). Passing null will use the
     *            default sort order, which may be unordered.
     * @return A {@link Cursor} object, which is positioned before the first entry. Note that
     * {@link Cursor}s are not synchronized, see the documentation for more details.
     * @see Cursor
     */
    public Cursor query(String table, String[] columns, String selection,
            String[] selectionArgs, String groupBy, String having,
            String orderBy);


    /**
     * Query the given table, returning a {@link Cursor} over the result set.
     *
     * @param table The table name to compile the query against.
     * @param columns A list of which columns to return. Passing null will
     *            return all columns, which is discouraged to prevent reading
     *            data from storage that isn't going to be used.
     * @param selection A filter declaring which rows to return, formatted as an
     *            SQL WHERE clause (excluding the WHERE itself). Passing null
     *            will return all rows for the given table.
     * @param selectionArgs You may include ?s in selection, which will be
     *         replaced by the values from selectionArgs, in order that they
     *         appear in the selection. The values will be bound as Strings.
     * @param groupBy A filter declaring how to group rows, formatted as an SQL
     *            GROUP BY clause (excluding the GROUP BY itself). Passing null
     *            will cause the rows to not be grouped.
     * @param having A filter declare which row groups to include in the cursor,
     *            if row grouping is being used, formatted as an SQL HAVING
     *            clause (excluding the HAVING itself). Passing null will cause
     *            all row groups to be included, and is required when row
     *            grouping is not being used.
     * @param orderBy How to order the rows, formatted as an SQL ORDER BY clause
     *            (excluding the ORDER BY itself). Passing null will use the
     *            default sort order, which may be unordered.
     * @param limit Limits the number of rows returned by the query,
     *            formatted as LIMIT clause. Passing null denotes no LIMIT clause.
     * @return A {@link Cursor} object, which is positioned before the first entry. Note that
     * {@link Cursor}s are not synchronized, see the documentation for more details.
     * @see Cursor
     */
    public Cursor query(String table, String[] columns, String selection,
            String[] selectionArgs, String groupBy, String having,
            String orderBy, String limit);
```

<table border="2">
    <tr>
        <th>query()æ–¹æ³•å‚æ•°</th>
        <th>å¯¹åº”SQLéƒ¨åˆ†</td>
        <th>æè¿°</th>
    </tr>
    <tr>
        <td>table</td>
        <td>from table_name</td>
        <td>æŒ‡å®šæŸ¥è¯¢çš„è¡¨å</td>
    </tr>
    <tr>
        <td>columns</td>
        <td>select column1, column2</td>
        <td>æŒ‡å®šæŸ¥è¯¢çš„åˆ—å</td>
    </tr>
    <tr>
        <td>selection</td>
        <td>where column = value</td>
        <td>æŒ‡å®šwhereçš„çº¦æŸæ¡ä»¶</td>
    </tr>
    <tr>
        <td>selectionArgs</td>
        <td>-</td>
        <td>ä¸ºwhereé‡çš„å ä½ç¬¦ã€?ã€‘æä¾›å…·ä½“çš„å€¼</td>
    </tr>
    <tr>
        <td>groupBy</td>
        <td>group by column</td>
        <td>æŒ‡å®šéœ€è¦groupByçš„åˆ—</td>
    </tr>
    <tr>
        <td>having</td>
        <td>having column = value</td>
        <td>å¯¹groupByçš„ç»“æœè¿›è¡Œè¿›ä¸€æ­¥çº¦æŸ</td>
    </tr>
    <tr>
        <td>orderBy</td>
        <td>order by column1, column2</td>
        <td>æŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ’åºæ”¾å¼</td>
    </tr>
</table><br/><br/>

#### 3ã€ä½¿ç”¨ SQL è¯­å¥æ“ä½œæ•°æ®åº“

> ç›´æ¥ä½¿ç”¨SQLæ¥å®Œæˆå‰é¢çš„CRUDæ“ä½œ

* æ·»åŠ æ•°æ®çš„æ–¹æ³•

```
    db.execSQL("insert into Book (name, author, pages, price) values (?, ?, ?, ?)", new String[]{"The Da Vinci Code", "Dan Brown", "454", "16.96"});

    db.execSQL("insert into Book (name, author, pages, price) values (?, ?, ?, ?)", new String[]{"The Lost Symbol", "Dan Brown", "510", "19.95"});
```

* æ›´æ–°æ•°æ®çš„æ–¹æ³•

```
    db.execSQL("update Book set price = ? where name = ?", new String[]{"10.99", "The Da Vinci Code"});
```

* åˆ é™¤æ•°æ®çš„æ–¹æ³•

```
    db.execSQL("delete from Book where pages > ?", new String[]{"500"});
```

* æŸ¥è¯¢æ•°æ®çš„æ–¹æ³•

```
    db.rawQyery("select * from Book", null);
```

#### 4ã€ä½¿ç”¨ **LitePal** æ“ä½œæ•°æ®åº“

> LitePal æ˜¯ä¸€æ¬¾å¼€æºçš„ Android æ•°æ®åº“æ¡†æ¶ï¼Œå®ƒé‡‡ç”¨äº†å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰æ¨¡å¼ï¼Œå¹¶å°†æˆ‘ä»¬å¹³æ—¶å¼€å‘æœ€å¸¸ç”¨åˆ°çš„ä¸€äº›æ•°æ®åº“åŠŸèƒ½è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—ä¸ç”¨ç¼–å†™ä¸€è¡ŒSQLè¯­å¥å°±å¯ä»¥å®Œæˆå„ç§å»ºè¡¨å’Œå¢åˆ æ”¹æŸ¥çš„æ“ä½œ

**LitePalçš„é¡¹ç›®ä¸»é¡µæœ‰è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£** 

[LitePalçš„é¡¹ç›®ä¸»é¡µåœ°å€](https://github.com/LitePalFramework/LitePal) 


------
------


## ç¬¬ä¸ƒç«  è·¨è¿›ç¨‹å…±äº«æ•°æ® æ¢ç©¶ **Content Provider**

-----

### 7.1ã€Content Provider ç®€ä»‹

> Content Provider ä¸»è¦ç”¨äºåœ¨ä¸åŒçš„åº”ç”¨ç¨‹åºä¹‹é—´å®ç°æ•°æ®å…±äº«çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€å¥—å®Œæ•´çš„æœºåˆ¶ï¼Œå…è®¸ä¸€ä¸ªç¨‹åºè®¿é—®å¦ä¸€ä¸ªç¨‹åºä¸­çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯è¢«è®¿é—®çš„æ•°æ®çš„å®‰å…¨æ€§ã€‚

> **ä½¿ç”¨Content Provideræ˜¯Androidå®ç°è·¨ç¨‹åºå…±äº«æ•°æ®çš„æ ‡å‡†æ–¹å¼**

### 2ã€Android è¿è¡Œæ—¶æƒé™

> Android å¼€å‘å›¢é˜Ÿåœ¨ Android 6.0 ç³»ç»Ÿä¸­å¼•ç”¨äº†è¿è¡Œæ—¶æƒé™è¿™ä¸ªåŠŸèƒ½ï¼Œä»è€Œæ›´å¥½åœ°ä¿æŠ¤ç”¨æˆ·çš„å®‰å…¨è¡Œä¸šéšç§ã€‚

#### 7.2ã€Androidæƒé™æœºåˆ¶

* Android ç°åœ¨å°†æƒé™å½’ä¸ºä¸¤å¤§ç±»ï¼šä¸€ç±»æ˜¯æ™®é€šæƒé™ï¼›ä¸€ç±»æ˜¯å±é™©æƒé™ã€‚
    * æ™®é€šæƒé™ï¼šæ˜¯æŒ‡é‚£äº›ä¸ä¼šç›´æ¥å¨èƒåˆ°ç”¨æˆ·çš„å®‰å…¨å’Œéšç§çš„æƒé™ï¼Œå¯¹äºè¿™éƒ¨åˆ†æƒé™ç”³è¯·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è¿›è¡Œæˆæƒï¼Œè€Œä¸éœ€è¦ç”¨æˆ·å†å»æ‰‹åŠ¨æ“ä½œäº†ã€‚
    * å±é™©æƒé™ï¼šè¡¨ç¤ºé‚£äº›å¯èƒ½ä¼šè§¦åŠç”¨æˆ·éšç§ï¼Œæˆ–è€…å¯¹è®¾å¤‡å®‰å…¨æ€§é€ æˆå½±å“çš„æƒé™ã€‚æ¯”å¦‚ï¼šè·å–è®¾å¤‡è”ç³»äººä¿¡æ¯ï¼›å®šä½è®¾å¤‡çš„åœ°ç†ä½ç½®ä¿¡æ¯ç­‰ï¼Œå¯¹äºè¿™éƒ¨åˆ†æƒé™ï¼Œå¿…é¡»ç”±ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»æˆæƒæ‰å¯ä»¥ï¼Œå¦åˆ™ç¨‹åºå°±æ— æ³•ä½¿ç”¨ç›¸åº”çš„åŠŸèƒ½ã€‚

* Androidä¸­æ‰€æœ‰çš„å±é™©æƒé™ï¼Œä¸€å…±æ˜¯9ç»„24ä¸ªæƒé™ã€‚å¦‚ä¸‹ï¼š
>
> CALENDAR (æ—¥å†) ã€æƒé™ç»„åã€‘
> > ã€æƒé™åã€‘
> > * READ_CALENDAR
> > * WRITE_CALENDAR
>
> CAMERA (ç›¸æœº)
> > * CAMERA
>
> LOCATION
> > * ACCESS_FINE_LOCATION
> > * ACCESS_COARSE_LOCATION
>
> MICROPHONE
> > * RECORD_AUDIO
>
> PHONE
> > * READ_PHONE_STATE
> > * CALL_PHONE
> > * READ_CALL_LOG
> > * WRITE_CALL_LOG
> > * ADD_VOICEMAIL
> > * USE_SIP
> > * PROCESS_OUT_CALLS
>
> SENSORS
> > * SEND_SMS
> > * RECEIVE_SMS
> > * READ_SMS
> > * RECEIVE_WAP_PUSH
> > * RECEIVE_MMS
>
> STORAGE
> > * READ_EXTERNAL_STORAGE
> > * WRITE_EXTERNAL_STORAGE
>
>

**âš ï¸æ³¨æ„ï¼šä¸Šè¡¨ä¸­çš„æ¯ä¸ªå±é™©æƒé™éƒ½æœ‰ä¸€ä¸ªæƒé™ç»„ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œè¿è¡Œæ—¶æƒé™å¤„ç†æ—¶ä½¿ç”¨çš„æ˜¯æƒé™åï¼Œä½†æ˜¯ç”¨æˆ·ä¸€æ—¦åŒæ„æˆæƒï¼Œé‚£ä¹ˆè¯¥æƒé™æ‰€å¯¹åº”çš„æƒé™ç»„ä¸­æ‰€æœ‰å…¶ä»–æƒé™ä¹ŸåŒæ—¶ä¼šè¢«æˆæƒã€‚**

[æŸ¥çœ‹Androidç³»ç»Ÿä¸­å®Œæ•´çš„æƒé™è¡¨](https://developer.android.google.cn/reference/android/Manifest.permission.html)

#### åœ¨ç¨‹åºè¿è¡Œæ—¶ç”³è¯·æƒé™

ä»£ç ç¤ºä¾‹
```
    /***
     * è®¾ç½®è¿è¡Œæ—¶æƒé™ --- æ‰“ç”µè¯
     */
    private void callPhone() {
        if(ContextCompat.checkSelfPermission(this, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) {
            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CALL_PHONE}, 1);
        } else {
            call();
        }
    }

    // ç”³è¯·è¿è¡Œæ—¶æƒé™çš„å›è°ƒå‡½æ•°
    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);

        switch (requestCode) {
            case 1:
                if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                    call();
                } else {
                    Toast.makeText(this, "You denied the permission", Toast.LENGTH_SHORT).show();
                }
                break;
            default:
                break;
        }
    }

    // å®ç°æ‰“ç”µè¯çš„æ–¹æ³•
    private void call() {
        try {
            Intent intent = new Intent(Intent.ACTION_CALL);
            intent.setData(Uri.parse("tel:10086"));
            startActivity(intent);
            // æ³¨æ„ï¼šè¿™æ ·å®ç°çš„æ‰“ç”µè¯çš„åŠŸèƒ½ï¼Œåœ¨ä½äºAndroid 6.0ç³»ç»Ÿçš„æ‰‹æœºä¸Šæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œä½†æ˜¯åœ¨ Android 6.0 æˆ–æ›´é«˜ç‰ˆæœ¬ç³»ç»Ÿçš„æ‰‹æœºä¸Šè¿è¡Œï¼Œä¼šæŠ¥é”™ Permission Denial

        } catch (SecurityException e) {
            e.printStackTrace();
        }
    }

```

ä¸Šé¢çš„ä»£ç å·²ç»å°†å°†è¿è¡Œæ—¶æƒé™çš„å®Œæ•´æµç¨‹éƒ½è¦†ç›–äº†ã€‚è¿è¡Œæ—¶æƒé™çš„æ ¸å¿ƒå°±æ˜¯åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ç”±ç”¨æˆ·æˆæƒæˆ‘ä»¬å»æ‰§è¡ŒæŸäº›å±é™©æ“ä½œï¼Œç¨‹åºä¸å¾—æ“…è‡ªåšä¸»å»æ‰§è¡Œè¿™äº›å±é™©æ“ä½œã€‚
> * ç¬¬ä¸€æ­¥ å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯ä¸æ˜¯å·²ç»ç»™è¿‡æˆæƒäº†ï¼Œå€ŸåŠ© ContextCompact.checkSelfPermission() æ–¹æ³•ã€‚å°†æ–¹æ³•çš„è¿”å›å€¼å’Œ PackageManager.PERMISSION_GRANTEDåšæ¯”è¾ƒï¼Œç›¸ç­‰è¯´æ˜ç”¨æˆ·å·²ç»æˆæƒï¼Œä¸ç›¸ç­‰è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æˆæƒã€‚
>    > checkSelfPermission() æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Contextï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å…·ä½“çš„æƒé™åï¼Œæ¯”å¦‚æ‰“ç”µè¯çš„æƒé™åæ˜¯Manifest.permission.CALL_PHONE
> 
> * ç¬¬äºŒæ­¥ 
>   1. å¦‚æœå·²ç»æˆæƒï¼Œç›´æ¥æ‰§è¡Œæ‹¨æ‰“ç”µè¯çš„é€»è¾‘æ“ä½œï¼Œå³ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­çš„call()æ–¹æ³•ã€‚
>   2. å¦‚æœæ²¡æœ‰æˆæƒï¼Œåˆ™éœ€è¦è°ƒç”¨ActivityCompact.requestPermissions()æ–¹æ³•æ¥å‘ç”¨æˆ·ç”³è¯·æƒé™ã€‚
>   > requestPermissions()æ–¹æ³•æ¥æ”¶3ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Activityçš„å®ä¾‹ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªStringæ•°ç»„ï¼Œæˆ‘ä»¬è¦æŠŠç”³è¯·çš„æƒé™åæ”¾åˆ°æ•°ç»„ä¸­å³å¯ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯·æ±‚ç ï¼Œåªè¦æ˜¯å”¯ä¸€å€¼å°±å¯ä»¥äº†ï¼Œç¤ºä¾‹ä»£ç ä¸­ä¼ å…¥1ã€‚
> 
>   > è°ƒç”¨å®Œ requestPermissions()æ–¹æ³•åï¼Œç³»ç»Ÿä¼šå¼¹å‡ºä¸€ä¸ªæƒé™ç”³è¯·å¯¹è¯æ¡†ï¼Œç„¶åç”¨æˆ·å¯ä»¥é€‰æ‹©åŒæ„ æˆ–è€… æ‹’ç» æˆ‘ä»¬çš„æƒé™ç”³è¯·ï¼Œä¸ç®¡æ˜¯å“ªç§ç»“æœï¼Œæœ€ç»ˆéƒ½ä¼šå›è°ƒåˆ° onRequestPermissionsResult()æ–¹æ³•ï¼Œè€Œæˆæƒçš„ç»“æœä¼šå°è£…åœ¨ grantResultså‚æ•°ä¸­ã€‚

### 7.3ã€è®¿é—®ç¨‹åºä¸­çš„æ•°æ®

#### 7.3.1 ContentResolver çš„åŸºæœ¬ç”¨æ³•

* å¦‚æœæƒ³è¦è®¿é—® **Content Provider** ä¸­çš„å…±äº«æ•°æ®ï¼Œå°±ä¸€å®šè¦å€ŸåŠ©ContentResolverç±»ï¼Œé€šè¿‡Cotextä¸­çš„ **getContentResolver()** æ–¹æ³•è·å–è¯¥ç±»çš„å®ä¾‹
    > ContentResolverä¸­æä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•ç”¨äºå¯¹æ•°æ®è¿›è¡ŒCRUDæ“ä½œ
    > > * insert() ç”¨äºæ·»åŠ æ•°æ®
    > > * update() ç”¨äºæ›´æ–°æ•°æ®
    > > * delete() ç”¨äºåˆ é™¤æ•°æ®
    > > * query() ç”¨äºæŸ¥è¯¢æ•°æ®

* ContentResolverä¸­çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•éƒ½æ˜¯ä¸æ¥æ”¶è¡¨åå‚æ•°çš„ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªUriå‚æ•°ï¼ˆ**å†…å®¹URI**ï¼‰ä»£æ›¿ï¼Œå†…å®¹URIç»™ ContentProviderä¸­çš„æ•°æ®å»ºç«‹äº†å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå®ƒä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š**authority** å’Œ **path**ã€‚
    > * authority æ˜¯ç”¨äºå¯¹ä¸åŒçš„åº”ç”¨ç¨‹åºåšåŒºåˆ†çš„ï¼Œä¸€èˆ¬ä¸ºäº†é¿å…å†²çªï¼Œéƒ½ä¼šé‡‡ç”¨ç¨‹åºåŒ…åçš„æ–¹å¼æ¥è¿›è¡Œå‘½åã€‚æ¯”å¦‚ç¨‹åºçš„åŒ…åä¸º com.example.appï¼Œåˆ™è¯¥ç¨‹åºçš„authorityå¯ä»¥å‘½åä¸º com.example.app.provider
    > * ptah æ˜¯ç”¨äºå¯¹åŒä¸€åº”ç”¨ç¨‹åºä¸­ä¸åŒè¡¨åšåŒºåˆ†çš„ï¼Œé€šå¸¸éƒ½ä¼šæ·»åŠ åˆ° authority åé¢ã€‚æ¯”å¦‚ç¨‹åºæ•°æ®åº“ä¸­æœ‰ä¸¤å¼ è¡¨ table1 å’Œ table2ï¼Œåˆ™pathå¯ä»¥å‘½åä¸ºï¼š/table1 å’Œ /table2
    
    > æœ€åéœ€è¦åœ¨å†…å®¹URIå‰é¢åŠ ä¸Šåè®®å£°æ˜ **content://**

    ```
        // å†…å®¹ URI æœ€æ ‡å‡†çš„æ ¼å¼å†™æ³•å¦‚ä¸‹ï¼š
        content://com.emample.app.provider/table1
        content://com.emample.app.provider/table2
    ```

* æŸ¥è¯¢è¡¨1ä¸­çš„æ•°æ®
    ```
        Uri uri = Uri.prase("content://com.emample.app.provider/table1");

        Cursor cursor = getContentResolver().query(
            uri,
            projection,
            selection,
            selectionArgs,
            sortOrder
        )

        if(cursor != null) {
            while(cursor.moveToNext()) {
                String column1 = cursor.getString(cursor.getColumnIndex("column1"));

                int column2 = cursor.getInt(cursor.getColumnIndex("column2"));
                
            }

            cursor.close();
        }
    ```

    > å‚æ•°è¯¦è§£

    <table style="border: 1">
        <tr>
            <th>query()æ–¹æ³•å‚æ•°</th>
            <th>å¯¹åº”SQLéƒ¨åˆ†</th>
            <th>æè¿°</th>
        </tr>
        <tr>
            <td>uri</td>
            <td>form table_name</td>
            <td>æŒ‡å®šæŸ¥è¯¢æŸä¸ªå¯¹åº”ç¨‹åºä¸‹çš„æŸå¼ è¡¨</td>
        </tr>
        <tr>
            <td>projection</td>
            <td>select column1, column2</td>
            <td>æŒ‡å®šæŸ¥è¯¢çš„åˆ—å</td>
        </tr>
        <tr>
            <td>selection</td>
            <td>where column = value</td>
            <td>æŒ‡å®šwhereçš„çº¦æŸ</td>
        </tr>
        <tr>
            <td>selectionArgs</td>
            <td>-</td>
            <td>ä¸ºwhereä¸­çš„å ä½ç¬¦ï¼ˆ?ï¼‰æä¾›å…·ä½“çš„å€¼</td>
        </tr>
        <tr>
            <td>orderBy</td>
            <td>order by column1, column2</td>
            <td>æŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ’åºæ–¹å¼</td>
        </tr>
    </table>

* å‘è¡¨ä¸­æ·»åŠ ä¸€æ¡è®°å½•
    ```
        Uri uri = Uri.prase("content://com.emample.app.provider/table1");

        ContentValues values = new ContentValues();
        values.put("column1" , "text");
        values.put("colums2", 1);

        getContentResolver().insert(uri, values);
    ```

* æ›´æ–°è¡¨ä¸­çš„æ•°æ®

    ```
        Uri uri = Uri.prase("content://com.emample.app.provider/table1");
        ContentValues values = new ContentValues();
        values.put("column1", "");
        getContentResolver().update(
            uri,
            values,
            "column1 = ? and colum2 = ?",
            new String[] {"text", "1"}
        );

    ```

* åˆ é™¤è¡¨ä¸­çš„æ•°æ®

    ```
        Uri uri = Uri.prase("content://com.emample.app.provider/table1");
       
        getContentResolver().delete(
            uri,
            "colum2 = ?",
            new String[] {"1"}
        );

    ```

### 7.4ã€åˆ›å»ºè‡ªå·±çš„ContentProvider

#### 7.4.1ã€åˆ›å»ºContentProviderçš„æ­¥éª¤
> 1ï¼‰é€šè¿‡ç»§æ‰¿ContentProviderçš„æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ContentProviderã€‚ContentProvider ç±»ä¸­æä¾›äº†6ä¸ªæŠ½è±¡æ–¹æ³•ã€‚
```
    public class MyContentProvider extends ContentProvider {

        @Override
        public boolean onCreate() {
            return false;
        }

        @Nullable
        @Override
        public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
            return null;
        }

        @Nullable
        @Override
        public String getType(Uri uri) {
            return null;
        }

        @Nullable
        @Override
        public Uri insert(Uri uri, ContentValues values) {
            return null;
        }

        @Override
        public int delete(Uri uri, String selection, String[] selectionArgs) {
            return 0;
        }

        @Override
        public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {
            return 0;
        }
    }
```

> 6ä¸ªæ–¹æ³•çš„ä»‹ç»
> * onCreate() åˆå§‹åŒ–ContentProviderçš„æ—¶å€™è°ƒç”¨ã€‚
> > é€šå¸¸ä¼šåœ¨è¿™é‡Œå®Œæˆå¯¹æ•°æ®åº“çš„åˆ›å»ºå’Œå‡çº§æ“ä½œï¼Œè¿”å›trueè¡¨ç¤ºContentProvideråˆå§‹åŒ–æˆåŠŸï¼Œè¿”å›falseåˆ™è¡¨ç¤ºå¤±è´¥ã€‚âš ï¸æ³¨æ„ï¼šåªæœ‰å½“å­˜åœ¨ContentResolverå°è¯•è®¿é—®æˆ‘ä»¬ç¨‹åºä¸­çš„æ•°æ®æ—¶ï¼ŒContentProvideræ‰ä¼šè¢«åˆå§‹åŒ–
> 
> * query() ä»ContentProviderä¸­æŸ¥è¯¢æ•°æ®ã€‚
> > * ä½¿ç”¨uriå‚æ•°æ¥ç¡®å®šæŸ¥è¯¢å“ªå¼ è¡¨
> > * projectionå‚æ•°ç”¨äºç¡®å®šæŸ¥è¯¢çš„åˆ—
> > * selection å’Œ selectionArgs å‚æ•°ç”¨äºçº¦æŸæŸ¥è¯¢å“ªäº›è¡Œ
> > * sortOrderå‚æ•°ç”¨äºå¯¹ç»“æœè¡Œè¿›è¡Œæ’åº
> 
> > æŸ¥è¯¢çš„ç»“æœå­˜æ”¾åœ¨Cursorä¸­
>
> * insert() å‘ContentProviderä¸­æ·»åŠ ä¸€æ¡æ•°æ®ã€‚
> > ä½¿ç”¨uriå‚æ•°ç¡®å®šè¡¨,å¾…æ·»åŠ çš„æ•°æ®ä¿å­˜åœ¨ContentValueså¯¹è±¡ä¸­ã€‚æ·»åŠ å®Œæˆåï¼Œè¿”å›ç”¨äºè¡¨ç¤ºè¿™æ¡è®°å½•çš„URI
>
> * update() æ›´æ–°æ•°æ®ï¼Œ å—å½±å“çš„è¡Œæ•°å°†ä½œä¸ºè¿”å›å€¼è¿”å›
>
> * delete() åˆ é™¤æ•°æ®ï¼Œ è¢«åˆ é™¤çš„è¡Œæ•°ä½œä¸ºè¿”å›å€¼è¿”å›
>
> * getType() æ ¹æ®ä¼ å…¥çš„å†…å®¹æ¥è¿”å›ç›¸åº”çš„MIMEç±»å‹
>



å›é¡¾ä¸€ä¸‹ï¼š
æ ‡å‡†çš„å†…å®¹URIæ ¼å¼ï¼š

```
content://com.example.app.provider/table1
```

è¡¨ç¤ºè°ƒç”¨æ–¹æ³•æœŸæœ›è®¿é—® com.example.appè¿™ä¸ªåº”ç”¨ä¸­çš„table1è¡¨ä¸­çš„æ•°æ®ã€‚é™¤æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¿™ä¸ªå†…å®¹URIçš„åé¢åŠ ä¸€ä¸ªidï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
content://com.example.app.provider/table1/1
```

è¡¨ç¤ºè°ƒç”¨æ–¹æ³•æœŸæœ›è®¿é—®çš„æ˜¯com.example.appè¿™ä¸ªåº”ç”¨ä¸­table1è¡¨ä¸­idä¸º1çš„æ•°æ®ã€‚

å†…å®¹ URI çš„æ ¼å¼ä¸»è¦æœ‰ä»¥ä¸Šä¸¤ç§ï¼Œä»¥è·¯åŠ²ç»“å°¾å°±è¡¨ç¤ºè®¿é—®è¯¥è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œä»¥ id ç»“å°¾å°±è¡¨ç¤ºæœŸæœ›è®¿é—®è¯¥è¡¨ä¸­æ‹¥æœ‰ç›¸åº” id çš„æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼æ¥åˆ†åˆ«åŒ¹é…è¿™ä¸¤ç§æ ¼å¼çš„å†…å®¹URIï¼Œè§„åˆ™å¦‚ä¸‹ï¼š

> \* : è¡¨ç¤ºåŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦
> \# : è¡¨ç¤ºåŒ¹é…ä»»æ„é•¿åº¦çš„æ•°å­—

ä¸€ä¸ªèƒ½å¤ŸåŒ¹é…table1è¡¨ä¸­ä»»æ„çš„å†…å®¹URIæ ¼å¼å¯ä»¥å†™æˆï¼š
```
content://com.example.app.provider/table1/*
```

ä¸€ä¸ªèƒ½å¤ŸåŒ¹é…table1è¡¨ä¸­ä»»æ„ä¸€è¡Œçš„å†…å®¹URIæ ¼å¼å¯ä»¥å†™æˆ
```
content://com.example.app.provider/table1/#
```

> 2ï¼‰å€ŸåŠ© UriMatcherè¿™ä¸ªç±»å®ç°åŒ¹é…å†…å®¹URIçš„åŠŸèƒ½ã€‚
> > * UriMatcherç±»ä¸­æä¾›ä¸€ä¸ª addURI()æ–¹æ³•ï¼Œå¯ä»¥åˆ†åˆ«æŠŠ authorityã€path å’Œ è‡ªå®šä¹‰çš„ä»£ç ä¼ è¿›å»ã€‚
> > * è°ƒç”¨UriMatcherçš„match() æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªUriå¯¹è±¡ä¼ å…¥ï¼Œè¿”å›å€¼æ˜¯æŸä¸ªèƒ½å¤ŸåŒ¹é…è¿™ä¸ªUriå¯¹è±¡æ‰€åº”çš„è‡ªå®šä¹‰ä»£ç 

```
    public static final int TABLE1_DIR = 1;
    public static final int TABLE1_ITEM = 2;
    public static final int TABLE2_DIR = 3;
    public static final int TABLE2_ITEM = 4;\

    private static UriMatcher uriMatcher;

    static {
        uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
        uriMatcher.addURI("org.liti.firstcode.provider", "table1", TABLE1_DIR);
        uriMatcher.addURI("org.liti.firstcode.provider", "table1/#", TABLE1_ITEM);
        uriMatcher.addURI("org.liti.firstcode.provider", "table2", TABLE2_DIR);
        uriMatcher.addURI("org.liti.firstcode.provider", "table2/#", TABLE2_ITEM);
    }

    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {

        switch(uriMatcher.match(uri)) {
            case TABLE1_DIR: // æŸ¥è¯¢ table1 è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®

                break;
            case TABLE1_ITEM: // æŸ¥è¯¢ table1 è¡¨ä¸­çš„å•æ¡æ•°æ®

                break;
            case TABLE2_DIR:

                break;
            case TABLE2_ITEM:

                break;
        }

        return null;
    }

```

> 3ï¼‰getType()æ–¹æ³•ï¼Œå®ƒæ˜¯æ‰€æœ‰ContentProvideréƒ½å¿…é¡»æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè·å–Uriå¯¹è±¡æ‰€å¯¹åº”çš„MIMEç±»å‹ã€‚ä¸€ä¸ªå†…å®¹URIå¯¹åº”çš„MIMEå­—ç¬¦ä¸²ä¸»è¦ç”±3éƒ¨åˆ†ç»„æˆï¼ŒAndroidå¯¹è¿™3éƒ¨åˆ†åšäº†æ ¼å¼è§„å®š
>
> > * å¿…é¡»ä»¥ **vnd** å¼€å¤´
> > * å¦‚æœå†…å®¹URIä»¥è·¯å¾„ç»“å°¾ï¼Œåˆ™åæ¥android.cursor.dir/ï¼Œå¦‚æœå†…å®¹URIä»¥idç»“å°¾ï¼Œåˆ™åæ¥android.cursor.item/ã€‚
> > * æœ€åæ¥ä¸Š vnd.< authority >.< path >
>

å¯¹äº content://com.example.app.provider/table1/ è¿™ä¸ªå†…å®¹URIï¼Œå®ƒæ‰€å¯¹åº”çš„MIMEç±»å‹å­—ç¬¦ä¸²å¯ä»¥å†™æˆï¼š

```
    vnd.android.cursor.dir/vnd.com.example.app.provider.table1
```

å¯¹äº content://com.example.app.provider/table1/1 è¿™ä¸ªå†…å®¹URIï¼Œå®ƒæ‰€å¯¹åº”çš„MIMEç±»å‹å­—ç¬¦ä¸²å¯ä»¥å†™æˆï¼š

```
    vnd.android.cursor.item/vnd.com.example.app.provider.table1
```

å®ç°getType()æ–¹æ³•ä¸­çš„é€»è¾‘

```
    private static final String URI_AUTHORITY = "org.liti.firstcode.provider";

    public String getType(Uri uri) {

        switch(uriMatcher.match(uri)) {
            case TABLE1_DIR: // æŸ¥è¯¢ table1 è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®
                return "vnd.android.cursor.dir/vnd." + URI_AUTHORITY + ".table1";
            case TABLE1_ITEM: // æŸ¥è¯¢ table1 è¡¨ä¸­çš„å•æ¡æ•°æ®
                return "vnd.android.cursor.item/vnd." + URI_AUTHORITY + ".table1";
            case TABLE2_DIR:
                return "vnd.android.cursor.dir/vnd." + URI_AUTHORITY + ".table2";
            case TABLE2_ITEM:
                return "vnd.android.cursor.item/vnd." + URI_AUTHORITY + ".table2";
        }

        return null;
    }
```

### 7.5ã€GITæ—¶é—´ â€”â€” ç‰ˆæœ¬æ§åˆ¶å·¥å…·è¿›é˜¶

#### 7.5.1ã€å¿½ç•¥æ–‡ä»¶

* Gitæä¾›äº†ä¸€ç§å¯é…æ€§å¾ˆå¼ºçš„æœºåˆ¶æ¥å…è®¸ç”¨æˆ·å°†æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–ï¼Œå®ƒä¼šæ£€æŸ¥ä»£ç ä»“åº“çš„ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨ä¸€ä¸ªåä¸º **.gitignore** çš„æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨çš„è¯ï¼Œå°±å»ä¸€è¡Œè¡Œè¯»å–è¿™ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶æŠŠæ¯ä¸€è¡ŒæŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–ã€‚æ³¨æ„ï¼š .gitignore æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å¯ä»¥ç”¨ â€œ*â€ é€šé…ç¬¦

#### 7.5.2ã€æŸ¥çœ‹ä¿®æ”¹çš„å†…å®¹

* git status  å‘½ä»¤å¯ä»¥æŸ¥çœ‹è‡³ä¸Šæ¬¡æäº¤åæ–‡ä»¶ä¿®æ”¹çš„å†…å®¹

* git diff å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çš„æ›´æ”¹å†…å®¹ï¼Œåé¢æ¥æ–‡ä»¶åï¼ˆåŒ…å«è·¯å¾„

#### 7.5.3ã€æ’¤é”€æœªæäº¤çš„ä¿®æ”¹

* git checkout filename å‘½ä»¤è¿™ç§æ’¤é”€æ–¹å¼åªé€‚ç”¨äºé‚£äº›è¿˜æ²¡æœ‰æ‰§è¡Œè¿‡ add å‘½ä»¤çš„æ–‡ä»¶


å¯¹äºå·²ç»æ‰§è¡Œè¿‡ add å‘½ä»¤çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå¯¹å…¶å–æ¶ˆæ·»åŠ ï¼Œç„¶åæ‰å¯ä»¥æ’¤å›æäº¤
* git reset HEAD filename  å–æ¶ˆæ·»åŠ ï¼Œç„¶åæ‰§è¡Œ git checkout å‘½ä»¤æ’¤å›æäº¤

#### 7.5.4ã€æŸ¥çœ‹æäº¤è®°å½•

* git log 

* git log æäº¤è®°å½•id -l è¡¨ç¤ºåªçœ‹å…¶ä¸­çš„ä¸€æ¡è®°å½•

* git log æäº¤è®°å½•id -p æŸ¥çœ‹è¿™æ¡è®°å½•çš„å…·ä½“ä¿®æ”¹å†…å®¹

  
























